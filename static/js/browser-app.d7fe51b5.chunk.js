(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[3],{1260:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){e.document.write('<html>\n  <head>\n    <style>\n      body {\n        margin: 0;\n        padding: 0;\n        background-color: #000000;\n        overflow: hidden;\n        height: 100vh;\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n      }\n      @keyframes spin {\n        100% {\n          transform:rotate(360deg);\n        }\n      }\n      .spinning-loader {\n        animation: spin 3s linear infinite;\n      }\n    </style>\n  </head>\n  <body>\n      <img class="spinning-loader" width="50" alt="Loading..." src="'.concat("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CjxjaXJjbGUgb3BhY2l0eT0nMC4yNScgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iNCI+PC9jaXJjbGU+CjxwYXRoIG9wYWNpdHk9JzAuNzUnIGZpbGw9IiNGRkZGRkYiIGQ9Ik00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3eiI+PC9wYXRoPgo8L3N2Zz4=",'">\n  </body>\n</html>'))}},2317:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(2),o=n(6),a=n(5),i=n(10),c=n(11),s=n(0),u=n.n(s),l=n(17),d=n(2318),p=n(2319),f=n(462),b=n(358),h=n.n(b),j=n(877),x=n(782),g=n(2320),m=n(26),v=n(1260),w=n(372),O=n(8),y=e.gd,F=0,k=function(e){var t=e.getGameResolutionWidth(),n=e.getGameResolutionHeight(),r=window.screenX+window.innerWidth/2-t/2,o=window.screenY+window.innerHeight/2-n/2,a="GDevelopPreview"+F++,i=window.open("about:blank",a,"width=".concat(t,",height=").concat(n,",left=").concat(r,",top=").concat(o));return Object(v.a)(i),i},S=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).canDoNetworkPreview=function(){return!1},e.canDoHotReload=function(){return!1},e.state={error:null},e._prepareExporter=function(){return Object(f.a)("preview").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=Object(x.a)(),o=Object(j.a)()+r,a=new p.a({filesContent:n,bucketBaseUrl:Object(j.a)(),prefix:r}),i=h()(new y.AbstractFileSystemJS,a),c=new y.Exporter(i,t);return c.setCodeOutputDirectory(o),{exporter:c,outputDir:o,browserS3FileSystem:a}}))},e.launchPreview=function(){var t=Object(r.a)(u.a.mark((function t(n){var r,o,a,i,c,s,l,d,p,f,b,h,j,x;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.project,o=n.layout,a=n.externalLayout,e.setState({error:null}),i=e.getPreviewDebuggerServer().getExistingDebuggerIds(),c=i.length?i[i.length-1]:null,s=n.hotReload&&null!==c,l=s?Object(g.b)(c):null,d=l||k(r),t.prev=7,t.next=10,e.getPreviewDebuggerServer().startServer();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(7),console.error("Unable to start the Debugger Server for the preview:",t.t0);case 15:return t.prev=15,t.next=18,e._prepareExporter();case 18:return p=t.sent,f=p.exporter,b=p.outputDir,h=p.browserS3FileSystem,(j=new y.PreviewExportOptions(r,b)).setLayoutName(o.getName()),j.setIsDevelopmentEnvironment(m.b.isDev()),a&&j.setExternalLayoutName(a.getName()),j.useWindowMessageDebuggerClient(),j.setNonRuntimeScriptsCacheBurst(Date.now()),j.setFullLoadingScreen(n.fullLoadingScreen),n.fallbackAuthor&&j.setFallbackAuthor(n.fallbackAuthor.id,n.fallbackAuthor.username),(x=Object(w.l)())&&j.setGDevelopResourceToken(x),f.exportProjectForPixiPreview(j),j.delete(),f.delete(),t.next=37,h.uploadPendingObjects();case 37:d.location=b+"/index.html",l||Object(g.c)(d),t.next=44;break;case 41:t.prev=41,t.t1=t.catch(15),e.setState({error:t.t1});case 44:case"end":return t.stop()}}),t,null,[[7,12],[15,41]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(a.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return g.a}},{key:"render",value:function(){var e=this,t=this.state.error;return t?Object(O.jsx)(d.a,{error:t,onClose:function(){return e.setState({error:null})}}):null}}]),n}(l.Component)}).call(this,n(25))},2318:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(6),o=n(5),a=n(10),i=n(11),c=n(9),s=n(17),u=n(303),l=n(298),d=n(295),p=n(296),f=n(8),b=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.onClose;return Object(f.jsx)(c.I18n,{children:function(e){e.i18n;return Object(f.jsxs)(u.c,{title:Object(f.jsx)(c.Trans,{id:"Could not launch the preview"}),actions:[Object(f.jsx)(l.a,{label:Object(f.jsx)(c.Trans,{id:"Close"}),onClick:n},"close")],onRequestClose:n,open:!0,children:[Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{noMargin:!0,children:Object(f.jsx)(p.a,{children:"NetworkingError"===t.code?Object(f.jsx)(c.Trans,{id:"The preview could not be launched because you're offline."}):Object(f.jsx)(c.Trans,{id:"The preview could not be launched because an error happened: {0}.",values:{0:t.message}})})})}),Object(f.jsx)(d.c,{children:Object(f.jsx)(d.a,{noMargin:!0,children:Object(f.jsx)(p.a,{children:Object(f.jsx)(c.Trans,{id:"Make sure you're online, have a proper internet connection and try again. If you download and use GDevelop desktop application, you can also run previews without any internet connection."})})})})]})}})}}]),n}(s.Component)},2319:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(479),i=n.n(a),c=n(877),s=e.gd,u=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},l=Object(r.a)((function e(t){var n=this,r=t.filesContent,a=t.prefix,l=t.bucketBaseUrl;Object(o.a)(this,e),this._pendingUploadObjects=[],this._allCopiedExternalUrls=new Set,this.uploadPendingObjects=function(){return Promise.all(n._pendingUploadObjects.map(c.b)).then((function(e){console.log("Uploaded all objects:",e),n._pendingUploadObjects=[]}),(function(e){throw console.error("Can't upload all objects:",e),e}))},this.mkDir=function(e){},this.dirExists=function(e){return!0},this.clearDir=function(e){},this.getTempDir=function(){return"/virtual-unused-tmp-dir"},this.fileNameFrom=function(e){return u(e)?e:i.a.basename(e)},this.dirNameFrom=function(e){return u(e)?"":i.a.dirname(e)},this.makeAbsolute=function(e,t){return u(e)?e:(n.isAbsolute(t)||(t=i.a.resolve(t)),i.a.resolve(t,i.a.normalize(e)))},this.makeRelative=function(e,t){return u(e)?e:i.a.relative(t,i.a.normalize(e))},this.isAbsolute=function(e){return!!u(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,t){return u(e)?(n._allCopiedExternalUrls.add(e),!0):(console.warn("Copy not done from",e,"to",t),!0)},this.writeToFile=function(e,t){var r=e.replace(n.bucketBaseUrl,""),o=i.a.extname(e);return n._pendingUploadObjects.push({Key:r,Body:t,ContentType:{".js":"text/javascript",".html":"text/html"}[o]}),!0},this.readFile=function(e){return n._indexedFilesContent[e]?n._indexedFilesContent[e].text:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new s.VectorString;return n._allCopiedExternalUrls.forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){return u(e),!0},this.prefix=a,this.bucketBaseUrl=l,this._indexedFilesContent={},r.forEach((function(e){n._indexedFilesContent[e.filePath]=e}))}))}).call(this,n(25))},2320:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return x}));var r=n(2),o=n(0),a=n.n(o),i="stopped",c=[],s=0,u={},l=function(){return Object.keys(u).map((function(e){return Number(e)}))},d=function(e){for(var t in u){var n=Number(t);if(u[n]===e)return n}return null},p=null,f=function(){null===p&&(p=setInterval((function(){var e=function(e){var t=Number(e);u[t].closed&&(console.info("A preview window was closed, with debugger id:",t),delete u[t],c.forEach((function(e){return(0,e.onConnectionClosed)({id:t,debuggerIds:l()})})),Object.keys(u).length||(clearInterval(p),p=null))};for(var t in u)e(t)}),1e3))},b="https://game-previews.gdevelop.io",h={startServer:function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("started"!==i){e.next=2;break}return e.abrupt("return");case 2:i="started",window.addEventListener("message",(function(e){if(e.origin===b){var t=d(e.source);if(null!==t)try{var n=JSON.parse(e.data);c.forEach((function(e){return(0,e.onHandleParsedMessage)({id:t,parsedMessage:n})}))}catch(r){console.error("Error while parsing messages coming from a preview:",r)}}})),f(),c.forEach((function(e){return(0,e.onServerStateChanged)()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendMessage:function(e,t){var n=u[e];if(n)try{n.postMessage(t,b)}catch(r){console.error("Unable to send a message to the preview window:",r)}},getServerState:function(){return i},getExistingDebuggerIds:l,registerCallbacks:function(e){return c.push(e),function(){var t=c.indexOf(e);-1!==t&&c.splice(t,1)}}},j=function(e){var t=s++;u[t]=e,f(),c.forEach((function(e){return(0,e.onConnectionOpened)({id:t,debuggerIds:l()})}))},x=function(e){return null==e?null:u[e]||null}},2321:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(3),o=n(9),a=(n(17),n(358)),i=n.n(a),c=n(377),s=n(878),u=n(462),l=n(495),d=n(463),p=n(703),f=n(8),b=e.gd,h={name:"browser-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,t,n){return t||""===n},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(u.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new b.ExportOptions(i,o);return c.setTarget("cordova"),n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(c.g)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var a=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(c.a)(a,i.uid,n,e.targets,e.keystore,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(25))},2322:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(3),o=n(9),a=(n(17),n(358)),i=n.n(a),c=n(377),s=n(878),u=n(462),l=n(495),d=n(463),p=n(704),f=n(8),b=e.gd,h={name:"browser-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,t,n){return!!e.targets.length&&(t||""===n)},isNavigationDisabled:function(e,t){return!t&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(f.jsx)(p.a,Object(r.a)({},e))},renderLaunchButtonLabel:function(){return Object(f.jsx)(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new l.a({textFiles:n}),o=i()(new b.AbstractFileSystemJS,r);return{exporter:new b.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new b.ExportOptions(i,o);return c.setTarget("electron"),n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(d.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(d.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},launchUpload:function(e,t){return Object(c.g)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var a=t.getAuthorizationHeader,i=t.firebaseUser;return i?Object(c.b)(a,i.uid,n,e.targets,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(25))},2323:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(358)),a=n.n(o),i=n(377),c=n(878),s=n(462),u=n(495),l=n(463),d=n(707),p=n(8),f=e.gd,b={name:"browser-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,t,n){return t||""===n||"done"===n},isNavigationDisabled:function(e,t){return!t&&!["","done"].includes(e)},renderHeader:function(){return Object(p.jsx)(d.a,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var t=e.build,n=e.project,r=e.onSaveProject,o=e.errored,a=e.exportStep;return Object(p.jsx)(d.b,{build:t,project:n,onSaveProject:r,errored:o,exportStep:a})},prepareExporter:function(e){return Object(s.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new u.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new f.ExportOptions(i,o);return n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(l.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(l.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress,sizeLimit:25e7})},launchUpload:function(e,t){return Object(i.g)().then((function(n){return Object(c.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n,r,o){var a=t.getAuthorizationHeader,c=t.firebaseUser;return c?Object(i.c)(a,c.uid,n,r,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(25))},2324:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(358)),a=n.n(o),i=n(462),c=n(495),s=n(463),u=n(305),l=n(591),d=n(706),p=n(8),f=e.gd,b={name:"browser-html5",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(i.a)("web").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new f.ExportOptions(i,o);return n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(25))},2325:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(358)),a=n.n(o),i=n(462),c=n(495),s=n(463),u=n(305),l=n(591),d=n(699),p=n(8),f=e.gd,b={name:"browser-cordova",packageNameWarningType:"mobile",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(i.a)("cordova").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new f.ExportOptions(i,o);return c.setTarget("cordova"),n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(25))},2326:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(358)),a=n.n(o),i=n(462),c=n(495),s=n(463),u=n(305),l=n(591),d=n(700),p=n(8),f=e.gd,b={name:"browser-electron",packageNameWarningType:"desktop",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(i.a)("electron").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new f.ExportOptions(i,o);return c.setTarget("electron"),n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{fullWidth:!0,primary:!0,onClick:function(){return Object(l.b)(e,"game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the exported game"})})}})}})}}}).call(this,n(25))},2327:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(9),o=(n(17),n(358)),a=n.n(o),i=n(462),c=n(495),s=n(463),u=n(305),l=n(591),d=n(702),p=n(8),f=e.gd,b={name:"browser-facebook-instant-games",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},isNavigationDisabled:function(){return!1},renderHeader:function(){return Object(p.jsx)(d.b,{})},renderLaunchButtonLabel:function(){return Object(p.jsx)(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(i.a)("facebook-instant-games").then((function(e){var t=e.gdjsRoot,n=e.filesContent;console.info("GDJS found in ",t);var r=new c.a({textFiles:n}),o=a()(new f.AbstractFileSystemJS,r);return{exporter:new f.Exporter(o,t),outputDir:"/export/",abstractFileSystem:r}}))},launchExport:function(e,t,n){var r=t.exporter,o=t.outputDir,a=t.abstractFileSystem,i=e.project,c=new f.ExportOptions(i,o);return c.setTarget("facebookInstantGames"),n&&c.setFallbackAuthor(n.id,n.username),r.exportWholePixiProject(c),c.delete(),r.delete(),Promise.resolve({textFiles:a.getAllTextFilesIn(o),urlFiles:a.getAllUrlFilesIn(o)})},launchResourcesDownload:function(e,t){var n=t.textFiles,r=t.urlFiles;return Object(s.b)({urlFiles:r,onProgress:e.updateStepProgress}).then((function(e){return{blobFiles:e,textFiles:n}}))},launchCompression:function(e,t){var n=t.textFiles,r=t.blobFiles;return Object(s.a)({blobFiles:r,textFiles:n,basePath:"/export/",onProgress:e.updateStepProgress})},renderDoneFooter:function(e){var t=e.compressionOutput;e.exportState,e.onClose;return Object(p.jsx)(d.a,{renderGameButton:function(){return Object(p.jsx)(l.a,{blob:t,children:function(e){return Object(p.jsx)(u.a,{primary:!0,onClick:function(){return Object(l.b)(e,"fb-instant-game.zip")},label:Object(p.jsx)(r.Trans,{id:"Download the Instant Game archive"})})}})}})}}}).call(this,n(25))},2328:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(1252),o=(n(588),n(378),e.gd),a=[{name:"AdMob",extensionModule:n(2329),objectsRenderingServiceModules:{}},{name:"AdvancedWindow",extensionModule:n(2330),objectsRenderingServiceModules:{}},{name:"FacebookInstantGames",extensionModule:n(2331),objectsRenderingServiceModules:{}},{name:"DeviceSensors",extensionModule:n(2332),objectsRenderingServiceModules:{}},{name:"DeviceVibration",extensionModule:n(2333),objectsRenderingServiceModules:{}},{name:"DebuggerTools",extensionModule:n(2334),objectsRenderingServiceModules:{}},{name:"Physics2",extensionModule:n(2335),objectsRenderingServiceModules:{}},{name:"ExampleJsExtension",extensionModule:n(2336),objectsRenderingServiceModules:{}},{name:"Tween",extensionModule:n(2337),objectsRenderingServiceModules:{}},{name:"Video",extensionModule:n(2338),objectsRenderingServiceModules:{}},{name:"FileSystem",extensionModule:n(2339),objectsRenderingServiceModules:{}},{name:"Firebase",extensionModule:n(2340),objectsRenderingServiceModules:{}},{name:"Leaderboards",extensionModule:n(2341),objectsRenderingServiceModules:{}},{name:"PlayerAuthentication",extensionModule:n(2342),objectsRenderingServiceModules:{}},{name:"DialogueTree",extensionModule:n(2343),objectsRenderingServiceModules:{}},{name:"BBText",extensionModule:n(2344),objectsRenderingServiceModules:{"pixi-multistyle-text/dist/pixi-multistyle-text.umd":n(2345)}},{name:"TileMap",extensionModule:n(2346),objectsRenderingServiceModules:{"pixi-tilemap/dist/pixi-tilemap.umd":n(2347),"helper/TileMapHelper":n(2350),"pako/dist/pako.min":n(2351)}},{name:"Effects",extensionModule:n(2352),objectsRenderingServiceModules:{}},{name:"P2P",extensionModule:n(2353),objectsRenderingServiceModules:{}},{name:"Lighting",extensionModule:n(2354),objectsRenderingServiceModules:{}},{name:"SpatialSound",extensionModule:n(2355),objectsRenderingServiceModules:{}},{name:"BitmapText",extensionModule:n(2356),objectsRenderingServiceModules:{}},{name:"Screenshot",extensionModule:n(2357),objectsRenderingServiceModules:{}},{name:"TextInput",extensionModule:n(2358),objectsRenderingServiceModules:{}}];function i(e){var t=e.objectsEditorService,n=e.objectsRenderingService,i=e.filterExamples;return{loadAllExtensions:function(e){return Promise.resolve(a.filter((function(e){var t=e.name;return!i||!t.includes("Example")})).map((function(a){var i=a.name,c=a.extensionModule,s=a.objectsRenderingServiceModules;if(t&&c.registerEditorConfigurations&&c.registerEditorConfigurations(t),n&&s)for(var u in s)n.registerModule(u,s[u]);return n&&c.registerInstanceRenderers&&c.registerInstanceRenderers(n),{extensionModulePath:"internal-extension://"+i,result:Object(r.loadExtension)(e,o,o.JsPlatform.get(),c)}})))}}}}).call(this,n(25))},2359:function(e,t,n){"use strict";var r=n(3),o=n(17),a=n.n(o),i=n(905),c=n(8);t.a=a.a.memo((function(e){return Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({},e),{},{children:Object(c.jsx)("path",{d:"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z"})}))}))},2360:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return A}));var r=n(3),o=n(34),a=n(2),i=n(0),c=n.n(i),s=n(9),u=n(17),l=n(303),d=n(298),p=n(305),f=n(295),b=n(297),h=n(26),j=n(591),x=n(323),g=n(338),m=n(60),v=n(296),w=n(493),O=n(874),y=n(451),F=n(372),k=n(463),S=n(479),P=n.n(S),E=n(95),C=n(8),R=e.gd,D="game.json",N=P.a.posix||P.a,T=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,o,a,i,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.onAddBlobFile,o=t.onProgress,a={erroredResources:[]},i=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().map((function(e){var n,r=t.getResource(e),o=r.getFile();return(n=o).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")||n.startsWith("blob:")||n.startsWith("data:")?Object(y.c)(o)?{resource:r,url:o,filename:Object(F.h)(o)}:null:(a.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported relative file when downloading a copy.")}),null)})).filter(Boolean)},s=i(n),e.next=6,Object(w.d)({urlContainers:s,onProgress:function(e,t){o(e,2*t)}});case 6:return u=e.sent,l=new Set([D]),u.forEach((function(e){var t=e.item,n=e.error,o=e.blob,i=t.resource,c=t.filename;if(!n&&o){var s=N.extname(c),u=N.basename(c,s),d="assets/"+i.getKind(),p=Object(E.a)(u,(function(e){return l.has(N.join(d,e+s))})),f=N.join(d,p+s);l.add(f),i.setFile(f),r({blob:o,filePath:f})}else a.erroredResources.push({resourceName:i.getName(),error:n||new Error("Unknown error during download.")})})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function A(e){var t=e.project,n=e.onDone,i=u.useState(null),w=Object(o.a)(i,2),y=w[0],F=w[1],S=Object(O.a)({onDoProcess:u.useCallback((function(e,t){return T(Object(r.a)(Object(r.a)({},e),{},{onProgress:t}))}),[])}),P=S.ensureProcessIsDone,E=S.renderProcessDialog;return u.useEffect((function(){return Object(a.a)(c.a.mark((function e(){var n,r,o,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(null),n=R.ProjectHelper.createNewGDJSProject(),e.prev=2,r=new R.SerializerElement,t.serializeTo(r),n.unserializeFrom(r),r.delete(),o=[],a=[],e.next=11,P({project:n,onAddBlobFile:function(e){o.push(e)}});case 11:return a.push({text:JSON.stringify(Object(g.b)(n)),filePath:D}),e.next=14,Object(k.a)({textFiles:a,blobFiles:o,basePath:"/",onProgress:function(e,t){}});case 14:i=e.sent,F(i),e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(2),Object(m.a)({message:"Unable to save your project because of an internal error.",rawError:e.t0,errorId:"download-file-save-as-dialog-error"}),e.abrupt("return");case 22:return e.prev=22,n.delete(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,18,22,25]])})))(),function(){return F(null)}}),[t,P]),Object(C.jsxs)(l.c,{title:Object(C.jsx)(s.Trans,{id:"Download a copy"}),actions:[Object(C.jsx)(d.a,{label:Object(C.jsx)(s.Trans,{id:"Download GDevelop desktop version"}),primary:!1,onClick:function(){return h.b.openExternalURL("http://gdevelop.io")}},"download"),Object(C.jsx)(d.a,{label:Object(C.jsx)(s.Trans,{id:"Close"}),primary:!1,onClick:n},"close")],onRequestClose:n,open:!0,maxWidth:"sm",children:[Object(C.jsxs)(b.a,{noMargin:!0,children:[Object(C.jsx)(v.a,{children:Object(C.jsx)(s.Trans,{id:"You can download the file of your game to continue working on it using the full GDevelop version:"})}),Object(C.jsx)(f.c,{noMargin:!0,expand:!0,justifyContent:"center",children:y?Object(C.jsx)(j.a,{blob:y,children:function(e){return Object(C.jsx)(p.a,{primary:!0,onClick:function(){return Object(j.b)(e,"gdevelop-game.zip")},label:Object(C.jsx)(s.Trans,{id:"Download the compressed game and resources"})})}}):Object(C.jsx)(x.a,{})})]}),E()]})}}).call(this,n(25))},2509:function(e,t,n){"use strict";var r=n(34),o=n(9),a=n(17),i=n(303),c=n(298),s=n(295),u=n(3),l=n(305),d=n(311),p=n(8),f={container:{position:"relative",display:"flex",alignItems:"baseline",width:"100%"},button:{marginLeft:10},textField:{flex:1}},b=function(e){return Object(p.jsxs)("div",{style:Object(u.a)({},f.container),children:[Object(p.jsx)(d.b,{style:f.textField,floatingLabelText:e.floatingLabelText,floatingLabelFixed:!0,type:"text",translatableHintText:{id:"Choose a file or folder"},value:e.value?e.value.name:"",onChange:function(){}}),Object(p.jsx)(l.a,{label:Object(p.jsx)(o.Trans,{id:"Choose..."}),primary:!0,style:f.button,onClick:e.onOpenPicker})]})},h=n(369),j=n(312);t.a=function(e){var t=a.useState(null),n=Object(r.a)(t,2),u=n[0],l=n[1],f=a.useState(""),x=Object(r.a)(f,2),g=x[0],m=x[1],v=a.useState(!1),w=Object(r.a)(v,2),O=w[0],y=w[1],F=a.useState(null),k=Object(r.a)(F,2),S=k[0],P=k[1],E=a.useState(null),C=Object(r.a)(E,2),R=C[0],D=C[1],N=a.useState(!1),T=Object(r.a)(N,2),A=T[0],M=T[1],I=function(){if(!O&&u)return"FOLDER"!==u.type||!!g},L=function(){I()&&u&&(P(null),y(!0),e.onSave({selectedFileOrFolder:u,newFileName:g}).catch((function(e){P(e),y(!1)})))},U=function(){return!O};return A?null:Object(p.jsx)(i.c,{title:Object(p.jsx)(o.Trans,{id:"Save on Google Drive"}),actions:[Object(p.jsx)(c.a,{label:Object(p.jsx)(o.Trans,{id:"Cancel"}),primary:!1,disabled:!U(),onClick:e.onCancel},"cancel"),Object(p.jsx)(h.a,{isLoading:O,children:Object(p.jsx)(i.a,{label:Object(p.jsx)(o.Trans,{id:"Save"}),primary:!0,disabled:!I(),onClick:L})},"save")],cannotBeDismissed:O,onRequestClose:function(){U()&&e.onCancel()},onApply:L,open:!0,maxWidth:"sm",children:Object(p.jsxs)(s.a,{noMargin:!0,children:[Object(p.jsx)(s.c,{children:Object(p.jsx)(b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"Google Drive folder or existing file to overwrite"}),value:u,onOpenPicker:function(){M(!0),D(null),e.onShowFilePicker({selectFolderEnabled:!0,showUploadView:!1}).then((function(e){l(e),M(!1)})).catch((function(e){D(e),M(!1)}))}})}),Object(p.jsx)(s.c,{children:u&&"FOLDER"===u.type?Object(p.jsx)(d.b,{floatingLabelText:Object(p.jsx)(o.Trans,{id:"New file name"}),floatingLabelFixed:!0,type:"text",translatableHintText:{id:"YourGame.json"},value:g,onChange:function(e,t){return m(t)},fullWidth:!0}):null}),S&&Object(p.jsx)(s.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when saving your game. Verify that you have the rights on the folder or file that you selected and try again."})}),R&&Object(p.jsx)(s.c,{children:Object(p.jsx)(j.a,{kind:"error",children:"There was an error when selecting a file or folder from Google Drive. Try again later or verify that you are properly connected to Google Drive."})})]})})}},291:function(e,t,n){"use strict";n.r(t),n.d(t,"create",(function(){return Je}));var r,o,a=n(3),i=n(17),c=n(904),s=n(26),u=n(1270),l=(n(67),n(166),n(19)),d=n(2),p=n(34),f=n(0),b=n.n(f),h=n(9),j=n(534),x=n(883),g=n(479),m=n.n(g),v=n(295),w=n(297),O=n(305),y=n(324),F=n(471),k=n(40),S=n.n(k),P=n(312),E=n(1248),C=n(370),R=n(8),D=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource;return Object(R.jsx)(x.a,{onChoose:function(e){var t=e.url,o=r();o.setFile(t);var a=Object(C.h)(t)?Object(C.a)(t):m.a.basename(t);o.setName(a),o.setOrigin("gdevelop-asset-store",t),n([o])},resourceKind:t.resourceKind})},N=function(e){var t=e.options,n=e.onChooseResources,r=e.createNewResource,o=i.useState(""),a=Object(p.a)(o,2),c=a[0],s=a[1],u=i.useState(null),l=Object(p.a)(u,2),f=l[0],j=l[1],x=i.useState([]),g=Object(p.a)(x,2),k=g[0],E=g[1],C=!!k.filter(Boolean).length,D=Object(F.a)(function(){var e=Object(d.a)(b.a.mark((function e(n){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.multiSelection?n.split("\n").filter(Boolean):[n],j(null),E([]),e.prev=3,e.next=6,Promise.all(r.map(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(t,{timeout:1e3,validateStatus:function(e){return!0}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:o=e.sent,E(o.map((function(e){return!(e.status>=200&&e.status<400)}))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),j(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),500);return i.useEffect((function(){D(c)}),[c,D]),Object(R.jsxs)(w.a,{noMargin:!0,expand:!0,children:[Object(R.jsx)(v.c,{noMargin:!0,children:Object(R.jsx)(w.d,{renderButton:function(e){return Object(R.jsx)(O.a,{onClick:function(){var e=t.multiSelection?c.split("\n").filter(Boolean):[c];n(e.map((function(e){var t=r();return t.setFile(e),t.setName(m.a.basename(e)),t.setOrigin("url",e),t})))},primary:!0,label:Object(R.jsx)(h.Trans,{id:"Choose"}),style:e,disabled:!!f||C})},renderTextField:function(){return Object(R.jsx)(y.a,{floatingLabelText:t.multiSelection?Object(R.jsx)(h.Trans,{id:"Resource(s) URL(s) (one per line)"}):Object(R.jsx)(h.Trans,{id:"Resource URL"}),value:c,onChange:s,multiline:t.multiSelection,rows:1,rowsMax:5,fullWidth:!0,errorText:f?Object(R.jsx)(h.Trans,{id:"There was an error verifying the URL(s). Please check they are correct."}):C?Object(R.jsx)(h.Trans,{id:"Unable to verify URLs {0} . Please check they are correct.",values:{0:k.map((function(e,t){return e?"#"+(t+1):null})).filter(Boolean).join(", ")}}):null})}})}),Object(R.jsx)(P.a,{kind:"warning",children:Object(R.jsx)(h.Trans,{id:"The URLs must be public and stay accessible while you work on this project - they won't be stored inside the project file. When exporting a game, the resources pointed by these URLs will be downloaded and stored inside the game."})})]})},T=[].concat(Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"upload-".concat(t),displayName:{id:"File(s) from your device"},displayTab:"import",kind:t,renderComponent:function(e){return Object(R.jsx)(E.a,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,automaticallyOpenInput:!!e.automaticallyOpenIfPossible},"url-chooser-".concat(t))}}}))),Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"resource-store-".concat(t),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:t,renderComponent:function(e){return Object(R.jsx)(D,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(t))}}}))),Object(l.a)(j.a.map((function(e){var t=e.kind,n=e.createNewResource;return{name:"url-chooser-".concat(t),displayName:{id:"Use a public URL"},displayTab:"import-advanced",kind:t,renderComponent:function(e){return Object(R.jsx)(N,{createNewResource:n,onChooseResources:e.onChooseResources,options:e.options},"url-chooser-".concat(t))}}})))),A=n(1),M=n(1249),I=n(54),L=n(354),U=n(493),B=n(60),G=n(1260),W=0,z={piskel:"external/piskel/piskel-index.html",yarn:"external/yarn/yarn-index.html",jfxr:"external/jfxr/jfxr-index.html"},_=function(){var e=Object(d.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var a=!1,i=!1,c=null,s=function(e){if(e.source===t)if(e.data&&"object"===typeof e.data){var o=e.data,i=o.id,s=o.payload;"external-editor-ready"===i?(console.info('External editor "'.concat(n,'" ready.')),a=!0,t.addEventListener("unload",(function(){u()})),t.postMessage({id:"open-external-editor-input",payload:r},window.location.origin)):"save-external-editor-output"===i?(console.info('Received data from external editor "'.concat(n,'."')),c=s):"close"===e.data.id&&(t.close(),u())}else console.warn("Ignoring malformed message data from the external editor window.")};window.addEventListener("message",s);var u=function(){i||(i=!0,console.info('External editor "'.concat(n,'" closed.')),window.removeEventListener("message",s),e(c))};t.addEventListener("load",(function(){console.info('External editor "'.concat(n,'" loaded.')),a=!0,t.addEventListener("unload",(function(){u()}))})),t.location=z[n],setTimeout((function(){a||i||(console.info('External editor "'.concat(n,' not loaded after 10 seconds - closing its window."')),t.close(),u())}),1e4)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o,a,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r=t.resourceNames,o=[],a=n.getResourcesManager(),r.forEach((function(e){if(a.hasResource(e)){var t=a.getResource(e).getFile();Object(L.h)(t)?Object(L.e)(t)?console.error("Unsupported blob URL for a resource - ignoring it."):o.push({url:t,resourceName:e}):console.error("Unsupported local file for a resource - ignoring it.")}})),e.next=6,Object(U.d)({urlContainers:o,onProgress:function(e,t){}});case 6:return i=e.sent,c=new Map,e.next=10,Promise.all(i.map(function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.error,n=t.blob,r=t.item,!n){e.next=15;break}return e.prev=2,e.t0=c,e.t1=r.resourceName,e.next=7,Object(U.a)(n);case 7:e.t2=e.sent,e.t3={dataUrl:e.t2},e.t0.set.call(e.t0,e.t1,e.t3),e.next=15;break;case 12:e.prev=12,e.t4=e.catch(2),console.error('Unable to read data from resource "'.concat(r.resourceName,'" - ignoring it.'),e.t4);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()));case 10:return e.abrupt("return",r.map((function(e){var t=c.get(e);if(!t)return{name:e,dataUrl:""};var n=t.localFilePath;return{name:e,dataUrl:t.dataUrl,localFilePath:n}})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o,a,i,c,s,u,l,d,p,f,h;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.externalEditorName,r=t.externalEditorWindow,o=t.defaultName,a=t.metadataKey,i=t.resourceKind,c=t.options,s=c.project,u=c.resourceNames,l=c.resourceManagementProps,e.next=4,J({project:s,resourceNames:u});case 4:return d=e.sent,p={singleFrame:c.extraOptions.singleFrame,externalEditorData:Object(M.c)(a,c.extraOptions.existingMetadata),fps:c.extraOptions.fps,isLooping:c.extraOptions.isLooping,name:c.extraOptions.name||u[0]||o,resources:d},Object(I.p)(n),e.next=9,_(r,n,p);case 9:if(f=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,Object(M.d)({baseNameForNewResources:f.baseNameForNewResources,project:s,resources:f.resources,resourceKind:i});case 14:return h=e.sent,e.prev=15,e.next=18,l.onFetchNewlyAddedResources();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.error("An error happened while fetching the newly added resources:",e.t0);case 23:return Object(M.a)({modifiedResources:h,metadataKey:a,metadata:c.extraOptions.singleFrame?f.externalEditorData:null}),Object(M.b)(h.map((function(e){return e.resource.getName()})),f.externalEditorData),e.abrupt("return",{resources:h.map((function(e){var t=e.resource,n=e.originalIndex;return{name:t.getName(),originalIndex:n}})),newName:f.baseNameForNewResources,newMetadata:Object(A.a)({},a,f.externalEditorData)});case 26:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(t){return e.apply(this,arguments)}}(),K={id:"You need to save this project as a cloud project to install this asset. Please save your project and try again."},Y=function(){var e="GDevelopExternalEditor"+W++,t=window.screenX+window.innerWidth/2-400,n=window.screenY+window.innerHeight/2-300,r=window.open("about:blank",e,"width=".concat(800,",height=").concat(600,",left=").concat(t,",top=").concat(n));if(!r)throw new Error("Can't open the external editor because of browser restrictions.");return Object(G.a)(r),r},V=[{name:"piskel-app",createDisplayName:{id:"Create with Piskel"},editDisplayName:{id:"Edit with Piskel"},kind:"image",edit:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"===t.getStorageProvider().internalName){e.next=4;break}return n=t.i18n,Object(B.c)(n._(K),{delayToNextTick:!0}),e.abrupt("return",null);case 4:return r=Y(),e.next=7,H({options:t,externalEditorWindow:r,externalEditorName:"piskel",defaultName:"New image",metadataKey:"pskl",resourceKind:"image"});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{name:"jfxr-app",createDisplayName:{id:"Create with Jfxr"},editDisplayName:{id:"Edit with Jfxr"},kind:"audio",edit:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"===t.getStorageProvider().internalName){e.next=4;break}return n=t.i18n,Object(B.c)(n._(K),{delayToNextTick:!0}),e.abrupt("return",null);case 4:return r=Y(),e.next=7,H({options:t,externalEditorWindow:r,externalEditorName:"jfxr",defaultName:"New sound effect",metadataKey:"jfxr",resourceKind:"audio"});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{name:"yarn-app",createDisplayName:{id:"Create with Yarn"},editDisplayName:{id:"Edit with Yarn"},kind:"json",edit:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Cloud"===t.getStorageProvider().internalName){e.next=4;break}return n=t.i18n,Object(B.c)(n._(K),{delayToNextTick:!0}),e.abrupt("return",null);case 4:return r=Y(),e.next=7,H({options:t,externalEditorWindow:r,externalEditorName:"yarn",defaultName:"New dialogue tree",metadataKey:"yarn",resourceKind:"json"});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],Z=V,X=n(2317),q=n(2321),Q=n(2322),$=n(2323),ee=n(2324),te=n(2325),ne=n(2326),re=n(2327),oe=n(699),ae=n(707),ie=n(706),ce=n(702),se=n(703),ue=n(704),le=n(700),de=Object(a.a)(Object(a.a)({},ae.c),{},{exportPipeline:$.a}),pe=[Object(a.a)(Object(a.a)({},ie.c),{},{exportPipeline:ee.a}),Object(a.a)(Object(a.a)({},se.b),{},{exportPipeline:q.a}),Object(a.a)(Object(a.a)({},ue.b),{},{exportPipeline:Q.a}),Object(a.a)(Object(a.a)({},ce.c),{},{exportPipeline:re.a})],fe=[Object(a.a)(Object(a.a)({},ie.c),{},{exportPipeline:ee.a}),Object(a.a)(Object(a.a)({},oe.c),{},{exportPipeline:te.a}),Object(a.a)(Object(a.a)({},le.c),{},{exportPipeline:ne.a})],be=n(2328),he=n(588),je=n(378),xe=n(877),ge=n(782),me=n(665),ve=n.n(me),we=function(e){var t=e.onWriteFile,n=Object(ge.a)(),r=function(e){return"".concat(n,"/").concat(ve()(e),".js")};return{getIncludeFileFor:function(e){return Object(xe.a)()+r(e)},writeFunctionCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading function generated code to ".concat(o,"...")),Object(xe.b)({Key:r(e),Body:n,ContentType:"text/javascript"})},writeBehaviorCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading behavior generated code to ".concat(o,"...")),Object(xe.b)({Key:r(e),Body:n,ContentType:"text/javascript"})},writeObjectCode:function(e,n){var o=r(e);return t({includeFile:o,content:n}),console.log("Uploading object generated code to ".concat(o,"...")),Object(xe.b)({Key:r(e),Body:n,ContentType:"text/javascript"})}}},Oe=n(1265),ye=n(690),Fe=n(492),ke=n(879),Se=n(2360),Pe=n(2361),Ee=n.n(Pe),Ce={internalName:"DownloadFile",name:{id:"Download a copy"},renderIcon:function(e){return Object(R.jsx)(Ee.a,{fontSize:e.size})},hiddenInOpenDialog:!0,createOperations:function(e){var t=e.setDialog,n=e.closeDialog;return{onSaveProjectAs:function(){var e=Object(d.a)(b.a.mark((function e(r,o,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.onStartSaving(),e.abrupt("return",new Promise((function(e){t((function(){return Object(R.jsx)(Se.a,{onDone:function(){n(),e({wasSaved:!1,fileMetadata:null})},project:r})}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}},Re=n(537),De=n(451),Ne=n(1257),Te=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.project,r={erroredResources:[]},o=n.getResourcesManager(),o.getAllResourceNames().toJSArray().forEach((function(e){var t=o.getResource(e),n=t.getFile();if(Object(L.h)(n))return Object(De.c)(n)?void r.erroredResources.push({resourceName:t.getName(),error:new Error("Resources uploaded to GDevelop Cloud are not supported on Google Drive.")}):Object(L.e)(n)?void r.erroredResources.push({resourceName:t.getName(),error:new Error("Resources with Blob URLs are not supported.")}):void 0;r.erroredResources.push({resourceName:t.getName(),error:new Error("Relative files in resources are not supported.")})})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=(r={},Object(A.a)(r,"".concat(Re.a.internalName,"=>").concat(Re.a.internalName),Ne.a),Object(A.a)(r,"".concat(Fe.a.internalName,"=>").concat(Re.a.internalName),Ae),Object(A.a)(r,"".concat(ke.a.internalName,"=>").concat(Re.a.internalName),Ae),Object(A.a)(r,"".concat(Re.a.internalName,"=>").concat(ke.a.internalName),Te),Object(A.a)(r,"".concat(Fe.a.internalName,"=>").concat(ke.a.internalName),Ae),Object(A.a)(r,"".concat(ke.a.internalName,"=>").concat(ke.a.internalName),Ae),Object(A.a)(r,"".concat(Re.a.internalName,"=>").concat(Ce.internalName),Ae),Object(A.a)(r,"".concat(Fe.a.internalName,"=>").concat(Ce.internalName),Ae),Object(A.a)(r,"".concat(ke.a.internalName,"=>").concat(Ce.internalName),Ae),r),Ie={moveAllProjectResources:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldStorageProvider,r=t.newStorageProvider,o=Me["".concat(n.internalName,"=>").concat(r.internalName)]){e.next=4;break}throw new Error("Can't find a ResourceMover for ".concat(n.internalName," to ").concat(r.internalName,"."));case 4:return e.abrupt("return",o(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Le=Ie,Ue=n(1259),Be=n(1258),Ge=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=(o={},Object(A.a)(o,Re.a.internalName,Ue.a),Object(A.a)(o,ke.a.internalName,Ge),Object(A.a)(o,Fe.a.internalName,Be.a),o),ze={fetchAllProjectResources:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.storageProvider,r=We[n.internalName]){e.next=4;break}throw new Error("Can't find a ResourceFetcher for ".concat(n.internalName," - have you registered the storage provider here?"));case 4:return e.abrupt("return",r(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_e=ze,Je=function(e){s.b.setUpContextMenu();var t=s.b.getArguments();return Object(R.jsx)(Oe.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:we,eventsFunctionsExtensionWriter:null,eventsFunctionsExtensionOpener:null,children:function(e){var n=e.i18n;return Object(R.jsx)(ye.a,{appArguments:t,storageProviders:[Fe.a,Re.a,ke.a,Ce],defaultStorageProvider:Fe.a,children:function(e){var t=e.getStorageProviderOperations,r=e.storageProviders,o=e.initialFileMetadataToOpen,i=e.getStorageProvider;return Object(R.jsx)(c.a,{i18n:n,renderPreviewLauncher:function(e,t){return Object(R.jsx)(X.a,Object(a.a)(Object(a.a)({},e),{},{ref:t}))},renderExportDialog:function(e){return Object(R.jsx)(u.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:pe,manualExporters:fe,onlineWebExporter:de,allExportersRequireOnline:!0})},storageProviders:r,resourceMover:Le,resourceFetcher:_e,getStorageProviderOperations:t,getStorageProvider:i,resourceSources:T,resourceExternalEditors:Z,extensionsLoader:Object(be.a)({objectsEditorService:he.a,objectsRenderingService:je.a,filterExamples:!s.b.isDev()}),initialFileMetadataToOpen:o})}})}})}},462:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(55),o={preview:["/Runtime/index.html"],web:["/Runtime/index.html"],"cocos2d-js":["/Runtime/Cocos2d/cocos2d-js-v3.10.js","/Runtime/Cocos2d/index.html","/Runtime/Cocos2d/main.js","/Runtime/Cocos2d/project.json"],"facebook-instant-games":["/Runtime/FacebookInstantGames/fbapp-config.json","/Runtime/FacebookInstantGames/index.html"],cordova:["/Runtime/Cordova/www/index.html","/Runtime/Cordova/config.xml","/Runtime/Cordova/package.json"],electron:["/Runtime/index.html","/Runtime/Electron/main.js","/Runtime/Electron/package.json"]},a=function(e){var t="https://resources.gdevelop-app.com/GDJS-".concat(Object(r.b)());return Promise.all(o[e].map((function(e){var n=t+e;return fetch(n).then((function(e){if(!e.ok)throw console.error('Error while downloading "'.concat(n,'"'),e),new Error('Error while downloading "'.concat(n,'" (status: ').concat(e.status,")"));return e.text().then((function(e){return{filePath:n,text:e}}))}))}))).then((function(e){return{gdjsRoot:t,filesContent:e}}))}},463:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(2),o=n(0),a=n.n(o),i=n(876),c=n(493),s=n(479),u=n.n(s),l=n(549);function d(e,t,n){if(e.length){var r=0;!function o(){t(e[r],(function(){++r>=e.length?n():o()}))}()}else n()}var p=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,r=t.onProgress,e.next=3,Object(c.d)({urlContainers:n.filter((function(e){return-1===e.url.indexOf(".h")})),onProgress:r});case 3:if(o=e.sent,!(i=o.filter((function(e){return!!e.error||!e.blob}))).length){e.next=8;break}throw s=i.map((function(e){var t=e.error;return t?t.message:"Unknown error during download."})).filter(Boolean).join(",\n"),new Error("Could not download ".concat(i.length," files:\n ").concat(Object(l.a)(s,300)));case 8:return e.abrupt("return",o.map((function(e){var t=e.item;return{blob:e.blob,filePath:t.filePath}})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,o,c,s,l,p,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.textFiles,r=t.blobFiles,o=t.basePath,c=t.onProgress,s=t.sizeLimit,e.next=3,Object(i.a)();case 3:return l=e.sent,p=0,f=r.length+n.length,e.abrupt("return",new Promise((function(e,t){l.createWriter(new l.BlobWriter("application/zip"),(function(a){d(r,(function(e,t){var n=e.filePath,r=e.blob,i=u.a.relative(o,n);a.add(i,new l.BlobReader(r),(function(){p++,c(p,f),t()}),(function(){}))}),(function(){d(n,(function(e,t){var n=e.filePath,r=e.text,i=u.a.relative(o,n);a.add(i,new l.TextReader(r),(function(){p++,c(p,f),t()}),(function(){}))}),(function(){a.close((function(n){var r=n.size;if(s&&r>s){var o=Math.round(r/1e6);t(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(s/1e6," MB.")))}e(n)}))}))}))}),(function(e){console.error("Error while making zip:",e),t(e)}))})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},495:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(5),o=n(6),a=n(479),i=n.n(a),c=e.gd,s=function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")||e.startsWith("blob:")||e.startsWith("data:")},u=i.a.posix||i.a,l=Object(r.a)((function e(t){var n=this,r=t.textFiles;Object(o.a)(this,e),this._textFiles={},this._filesToDownload={},this.getAllTextFilesIn=function(e){return Object.keys(n._textFiles).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,text:n._textFiles[e]}}))},this.getAllUrlFilesIn=function(e){return Object.keys(n._filesToDownload).filter((function(t){return 0===t.indexOf(e)})).map((function(e){return{filePath:e,url:n._filesToDownload[e]}}))},this.mkDir=function(e){return!0},this.dirExists=function(e){return!0},this.clearDir=function(e){return Object.keys(n._textFiles).forEach((function(t){0===t.indexOf(e)&&delete n._textFiles[t]})),!0},this.getTempDir=function(){return"/browser-file-system-tmp-dir"},this.fileNameFrom=function(e){return u.basename(e)},this.dirNameFrom=function(e){return u.dirname(e)},this.makeAbsolute=function(e,t){return s(e)?e:(n.isAbsolute(t)||(t=u.resolve(t)),u.resolve(t,u.normalize(e)))},this.makeRelative=function(e,t){return s(e)?0===e.indexOf(t)?e.substring(t.length):(console.warn("".concat(e," cannot be made relative to ").concat(t,", please double check this behavior is correct.")),e):u.relative(t,u.normalize(e))},this.isAbsolute=function(e){return!!s(e)||e.length>0&&"/"===e.charAt(0)},this.copyFile=function(e,t){return s(e)?s(t)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(t,").")),!1):(n._filesToDownload[u.normalize(t)]=e,!0):n._textFiles[e]?(n._textFiles[u.normalize(t)]=n._textFiles[e],!0):(console.error("File not found in copyFile (from ".concat(e," to ").concat(t,").")),!1)},this.writeToFile=function(e,t){return n._textFiles[u.normalize(e)]=t,!0},this.readFile=function(e){return n._textFiles[e]?n._textFiles[e]:(console.error("Unknown file ".concat(e,", returning an empty string")),"")},this.readDir=function(e,t){t=t.toUpperCase();var r=new c.VectorString;return Object.keys(n._filesToDownload).forEach((function(e){var n=e.toUpperCase();n.indexOf(t)===n.length-t.length&&r.push_back(e)})),r},this.fileExists=function(e){if(s(e))return!0;var t=u.normalize(e);return!!n._textFiles[t]||!!n._filesToDownload[t]},r.forEach((function(e){n._textFiles[e.filePath]=e.text}))}))}).call(this,n(25))},591:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(34),o=n(17),a=function(e){var t=e.blob,n=e.children,a=o.useState(""),i=Object(r.a)(a,2),c=i[0],s=i[1],u=o.useState(null),l=Object(r.a)(u,2),d=l[0],p=l[1];return o.useEffect((function(){t&&t!==d&&(s(URL.createObjectURL(t)),p(t))}),[t,d]),o.useEffect((function(){return function(){c&&URL.revokeObjectURL(c)}}),[c]),n(c)},i=function(e,t){var n=document.body;if(n){var r=document.createElement("a");n.appendChild(r),r.style.display="none",r.href=e,r.download=t,r.click(),n.removeChild(r)}}},877:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(40),o=n.n(r),a=n(35),i=n(411),c=function(e){return Object(i.g)({uploadType:"preview",key:e.Key,contentType:e.ContentType}).then((function(t){var n=t.signedUrl;return o.a.put(n,e.Body,{headers:{"Content-Type":e.ContentType}})}))},s=function(){return a.f.baseUrl}},878:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(40),o=n.n(r),a=function(e,t,n){return o.a.put(t.signedUrl,e,{headers:{"Content-Type":t.contentType},maxContentLength:1/0,onUploadProgress:function(e){e&&e.total?n(e.loaded,e.total):n(0,0)}}).then((function(){}))}},879:function(e,t,n){"use strict";(function(e){var r=n(2),o=n(3),a=n(0),i=n.n(a),c=(n(17),n(338)),s=n(2359),u=n(2509),l=n(116),d=n(8),p="AIzaSyDJYQmzLCfjXnNImDa1X_cDTWjl2BOrcM4",f=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],b="https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.install",h=!1,j=null,x=function(){return h?Promise.resolve():j||(j=Object(l.a)("https://apis.google.com/js/api:client.js").then((function(){var t=e.gapi;if(!t)throw new Error("No gapi global object found after loading Google Drive API script");return new Promise((function(e,n){t.load("client:auth2:picker",{callback:function(){var n=t.auth2.init({apiKey:p,clientId:"44882707384-3t4tubr3fbht87sbtdp7u5mlo45k5uku.apps.googleusercontent.com",discoveryDocs:f,scope:b});t.client.setApiKey(p);var r=t.client.load("drive","v3");e(Promise.all([n,r]))},onerror:function(){n(new Error("Unable to load auth2 and picker APIs for Google Drive."))}})}))})).then((function(){h=!0,j=null})).catch((function(e){throw console.error("Error while loading Google Drive APIs:",e),j=null,e})))},g=!1,m=function(){return x().then((function(){var t=e.gapi.auth2.getAuthInstance();return g&&t.isSignedIn.get()?t.currentUser.get():(g=!1,t.isSignedIn.listen((function(e){console.info("Authenticated with Google APIs: ",e),g=e})),t.signIn({scope:b}).then((function(e){if(!e.getAuthResponse()||e.getAuthResponse().error)throw console.error("OAuth2 error while sign in:",e.getAuthResponse()?e.getAuthResponse().error:"No AuthResponse"),new Error("Authentication error");return g=!0,e})))}))},v=function(e,t,n){return fetch("https://www.googleapis.com/upload/drive/v3/files/".concat(e),{method:"PATCH",headers:new Headers({Authorization:"Bearer ".concat(t.getAuthResponse().access_token),"Content-Type":"application/json"}),body:n}).then((function(e){if(200!==e.status)throw 401===e.status&&(g=!1),e}))},w=function(t){var n=t.selectFolderEnabled,r=t.showUploadView;return m().then((function(t){var o=e.google;return new Promise((function(e){var a=null,i=(new o.picker.PickerBuilder).addView((new o.picker.DocsView).setIncludeFolders(!0).setSelectFolderEnabled(n)).setOAuthToken(t.getAuthResponse().access_token).setDeveloperKey(p).setAppId("44882707384").setCallback((function(t){if(t[o.picker.Response.ACTION]===o.picker.Action.PICKED){var n=t[o.picker.Response.DOCUMENTS][0],r=n[o.picker.Document.ID],i=n[o.picker.Document.NAME],c=n[o.picker.Document.PARENT_ID];n[o.picker.Document.TYPE]===o.picker.Type.LOCATION||"application/vnd.google-apps.folder"===n[o.picker.Document.MIME_TYPE]?e({id:r,name:i,type:"FOLDER"}):e({id:r,name:i,type:"FILE",parentId:c}),a&&a.dispose()}else t[o.picker.Response.ACTION]===o.picker.Action.CANCEL&&(e(null),a&&a.dispose())}));r&&i.addView((new o.picker.DocsUploadView).setIncludeFolders(!0)),(a=i.build()).setVisible(!0);for(var c=document.getElementsByClassName("picker-dialog"),s=0;s<c.length;++s)c[s].style.zIndex="5000"}))}))};t.a={internalName:"GoogleDrive",name:{id:"Google Drive"},renderIcon:function(e){return Object(d.jsx)(s.a,{fontSize:e.size})},getFileMetadataFromAppArguments:function(e){if(e.state)try{var t=JSON.parse(e.state);if(t.ids&&t.ids[0])return{fileIdentifier:t.ids[0]}}catch(n){console.warn("Error while trying to parse the Google Drive 'ids' in 'state' from the app arguments.")}return null},createOperations:function(t){var n=t.setDialog,a=t.closeDialog;return x().catch((function(){})),{doesInitialOpenRequireUserInteraction:!0,onOpen:function(e){var t=e.fileIdentifier;return m().then((function(e){return fetch("https://www.googleapis.com/drive/v3/files/".concat(t,"?alt=media"),{method:"GET",headers:new Headers({Authorization:"Bearer ".concat(e.getAuthResponse().access_token)})})})).then((function(e){return e.text().then((function(e){return new Promise((function(n,r){try{return n({content:JSON.parse(e)})}catch(o){return r(t+" is a corrupted/malformed file.")}}))}),(function(e){throw console.error("Error while reading the file from Google Drive API: ",e),e}))}),(function(e){throw console.error("Error while fetching the file from Google Drive API: ",e),e}))},onOpenWithPicker:function(){return m().then((function(e){return w({selectFolderEnabled:!1,showUploadView:!0})})).then((function(e){return e?{fileIdentifier:e.id}:null}))},onSaveProject:function(e,t){var n=t.fileIdentifier,r=Object(o.a)(Object(o.a)({},t),{},{lastModifiedDate:Date.now()}),a=Object(c.a)(e);return m().then((function(e){return v(n,e,a)})).then((function(){return{wasSaved:!0,fileMetadata:r}}))},onChooseSaveProjectAsLocation:function(t){t.project,t.fileMetadata;return new Promise((function(t){n((function(){return Object(d.jsx)(u.a,{onShowFilePicker:w,onCancel:function(){a(),t({saveAsLocation:null})},onSave:function(){var n=Object(r.a)(i.a.mark((function n(r){var o,a,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.selectedFileOrFolder,a=r.newFileName,n.next=3,m();case 3:if("FOLDER"!==o.type){n.next=10;break}return n.next=6,i=o.id,s=a,e.gapi.client.drive.files.create({"content-type":"application/json",uploadType:"multipart",name:s,parents:[i],mimeType:"application/json",fields:"id, name, kind, size"}).then((function(e){return e.result.id}));case 6:c=n.sent,t({saveAsLocation:{fileIdentifier:c}}),n.next=11;break;case 10:t({saveAsLocation:{fileIdentifier:o.id}});case 11:case"end":return n.stop()}var i,s}),n)})));return function(e){return n.apply(this,arguments)}}()})}))}))},onSaveProjectAs:function(){var e=Object(r.a)(i.a.mark((function e(t,n,r){var o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(o=n.fileIdentifier){e.next=5;break}throw new Error("A file was not chosen before saving as.");case 5:return s=Object(c.a)(t),r.onStartSaving(),e.next=9,m();case 9:return u=e.sent,l={fileIdentifier:o},e.next=13,r.onMoveResources({newFileMetadata:l});case 13:return e.next=15,v(o,u,s);case 15:return a(),e.abrupt("return",{wasSaved:!0,fileMetadata:l});case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getOpenErrorMessage:function(e){return h?{id:"Check that you don't have any blocked popup (if so, allow them and retry) and that you have the authorization for reading the file you're trying to access."}:{id:"Google Drive could not be loaded. Check that you are not offline and have a proper internet connection, then try again."}}}}}}).call(this,n(25))}}]);
//# sourceMappingURL=browser-app.d7fe51b5.chunk.js.map