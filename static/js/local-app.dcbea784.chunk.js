(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{1250:function(e,r,t){"use strict";t.d(r,"a",(function(){return a}));var n=t(12),o=t.n(n)()("os"),a=function(){try{return o.userInfo().uid}catch(e){return""}}},1251:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var n=t(2),o=t(0),a=t.n(o),i=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.times,o=0,i=null;case 3:if(!(o<n)){e.next=18;break}return o++,i=null,e.prev=6,e.next=9,t();case 9:return c=e.sent,e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(6),i=e.t0;case 16:e.next=3;break;case 18:throw i;case 19:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(r,t){return e.apply(this,arguments)}}()},1255:function(e,r,t){"use strict";t.d(r,"a",(function(){return k}));var n=t(2),o=t(0),a=t.n(o),i=t(12),c=t.n(i),u=t(476),s=t.n(u),l=t(1251),p=t(95),f=t(431),d=t(370),h=t(354),b=t(1256),v=t(372),m=t(40),j=t.n(m),g=c()("electron"),x=g?g.ipcRenderer:null,w=c()("fs-extra"),O=c()("path"),y=function(e,r,t){var n=O.extname(t),o=O.basename(t,n),a=Object(p.a)(o,(function(t){var o=O.join(e,t)+n;return w.existsSync(o)||r.has(o)}));return O.join(e,a)+n},P=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}throw new Error("Not supported");case 2:return e.next=4,j.a.get(r,{responseType:"arraybuffer"});case 4:return n=e.sent,o=n.data,e.next=8,x.invoke("local-file-save-from-arraybuffer",o,t);case 8:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),k=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,o,i,c,u,p,m,j,g,k,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.project,o=r.fileMetadata,i=r.onProgress,w&&x){e.next=3;break}throw new Error("Unsupported");case 3:return c=t.getResourcesManager(),u=c.getAllResourceNames().toJSArray(),p=u.filter((function(e){var r=c.getResource(e);return Object(h.h)(r.getFile())})),m=O.dirname(o.fileIdentifier),j=O.join(m,"assets"),g=new Set,k=[],S=0,e.next=13,s.a.withConcurrency(50).for(p).process(function(){var e=Object(n.a)(a.a.mark((function e(r){var t,o,u,s,F,E,D,C;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.getResource(r),o=t.getFile(),!Object(h.e)(o)){e.next=18;break}return e.prev=3,u=Object(h.i)(t),s=u.localFilePath,F=u.extension,E=s?O.resolve(m,s):y(j,g,Object(b.a)(t.getName()+(F||""))),e.next=8,w.ensureDir(j);case 8:return e.next=10,P(o,E);case 10:t.setFile(O.relative(m,E).replace(/\\/g,"/")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),k.push({resourceName:r,error:e.t0});case 16:e.next=29;break;case 18:return D=Object(f.e)(o)?Object(f.b)(o):Object(d.h)(o)?Object(d.a)(o):Object(v.h)(o),C=y(j,g,D),g.add(C),e.prev=21,e.next=24,Object(l.a)({times:2},Object(n.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.ensureDir(j);case 2:return e.next=4,x.invoke("local-file-download",o,C);case 4:t.setFile(O.relative(m,C).replace(/\\/g,"/"));case 5:case"end":return e.stop()}}),e)}))));case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(21),k.push({resourceName:r,error:e.t1});case 29:i(S++,p.length);case 30:case"end":return e.stop()}}),e,null,[[3,13],[21,26]])})));return function(r){return e.apply(this,arguments)}}());case 13:return e.abrupt("return",{erroredResources:k});case 14:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},2280:function(e,r,t){"use strict";var n=t(1),o=t(2),a=t(0),i=t.n(a),c=t(1249),u=t(54),s=t(12),l=t.n(s),p=t(354),f=t(493),d=l()("path"),h=l()("fs"),b=l()("electron"),v=b?b.ipcRenderer:null,m=function(){var e=Object(o.a)(i.a.mark((function e(r,t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}throw new Error("Not supported.");case 2:return e.next=4,v.invoke("".concat(r,"-load"),t);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(i.a.mark((function e(r){var t,n,a,c,u,s,l,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.project,n=r.resourceNames,a=d.dirname(t.getProjectFile()),c=[],u=[],s=t.getResourcesManager(),n.forEach((function(e){if(s.hasResource(e)){var r=s.getResource(e).getFile();Object(p.h)(r)?Object(p.e)(r)?console.error("Unsupported blob URL for a resource - ignoring it."):c.push({url:r,resourceName:e}):u.push({localFilePath:r,resourceName:e})}})),e.next=8,Object(f.d)({urlContainers:c,onProgress:function(e,r){}});case 8:return l=e.sent,b=new Map,e.next=12,Promise.all(l.map(function(){var e=Object(o.a)(i.a.mark((function e(r){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.error,t=r.blob,n=r.item,!t){e.next=15;break}return e.prev=2,e.t0=b,e.t1=n.resourceName,e.next=7,Object(f.a)(t);case 7:e.t2=e.sent,e.t3={dataUrl:e.t2},e.t0.set.call(e.t0,e.t1,e.t3),e.next=15;break;case 12:e.prev=12,e.t4=e.catch(2),console.error('Unable to read data from resource "'.concat(n.resourceName,'" - ignoring it.'),e.t4);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(r){return e.apply(this,arguments)}}()));case 12:return e.next=14,Promise.all(u.map(function(){var e=Object(o.a)(i.a.mark((function e(r){var t,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.localFilePath,n=r.resourceName,e.prev=1,e.next=4,h.promises.readFile(d.resolve(a,t));case 4:o=e.sent,b.set(n,{localFilePath:t,dataUrl:"data:text/plain;base64,"+o.toString("base64")}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error('Unable to read local file "'.concat(t,'" - ignoring it.'),e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}()));case 14:return e.abrupt("return",n.map((function(e){var r=b.get(e);if(!r)return{name:e,dataUrl:""};var t=r.localFilePath;return{name:e,dataUrl:r.dataUrl,localFilePath:t}})));case 15:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(r){var t,o,a,s,l,p,f,d,h,b,v,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.externalEditorName,o=r.defaultName,a=r.metadataKey,s=r.resourceKind,l=r.options,p=l.project,f=l.resourceNames,d=l.resourceManagementProps,e.next=4,j({project:p,resourceNames:f});case 4:return h=e.sent,b={singleFrame:l.extraOptions.singleFrame,externalEditorData:Object(c.c)(a,l.extraOptions.existingMetadata),fps:l.extraOptions.fps,isLooping:l.extraOptions.isLooping,name:l.extraOptions.name||f[0]||o,resources:h},Object(u.p)(t),e.next=9,m(t,b);case 9:if(v=e.sent){e.next=12;break}return e.abrupt("return",null);case 12:return e.next=14,Object(c.d)({baseNameForNewResources:v.baseNameForNewResources,project:p,resources:v.resources,resourceKind:s});case 14:return g=e.sent,e.prev=15,e.next=18,d.onFetchNewlyAddedResources();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),console.error("An error happened while fetching the newly added resources:",e.t0);case 23:return Object(c.a)({modifiedResources:g,metadataKey:a,metadata:l.extraOptions.singleFrame?v.externalEditorData:null}),Object(c.b)(g.map((function(e){return e.resource.getName()})),v.externalEditorData),e.abrupt("return",{resources:g.map((function(e){var r=e.resource,t=e.originalIndex;return{name:r.getName(),originalIndex:t}})),newName:v.baseNameForNewResources,newMetadata:Object(n.a)({},a,v.externalEditorData)});case 26:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(r){return e.apply(this,arguments)}}(),x=[{name:"piskel-app",createDisplayName:{id:"Create with Piskel"},editDisplayName:{id:"Edit with Piskel"},kind:"image",edit:function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:r,externalEditorName:"piskel",defaultName:"New image",metadataKey:"pskl",resourceKind:"image"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{name:"Jfxr",createDisplayName:{id:"Create with Jfxr"},editDisplayName:{id:"Edit with Jfxr"},kind:"audio",edit:function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:r,externalEditorName:"jfxr",defaultName:"New sound effect",metadataKey:"jfxr",resourceKind:"audio"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{name:"Yarn",createDisplayName:{id:"Create with Yarn"},editDisplayName:{id:"Edit with Yarn"},kind:"json",edit:function(){var e=Object(o.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({options:r,externalEditorName:"yarn",defaultName:"New dialogue tree",metadataKey:"yarn",resourceKind:"json"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}];r.a=x},2281:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return k}));var n=t(6),o=t(5),a=t(10),i=t(11),c=t(9),u=t(17),s=t(438),l=t(12),p=t.n(l),f=t(2282),d=t(417),h=t(2283),b=t(358),v=t.n(b),m=t(770),j=t(2285),g=t(26),x=t(8),w=p()("electron"),O=p()("path"),y=w?w.ipcRenderer:null,P=e.gd,k=function(e){Object(a.a)(t,e);var r=Object(i.a)(t);function t(){var e;Object(n.a)(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,previewBrowserWindowOptions:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){var r=e.state,t=r.previewGamePath,n=r.previewBrowserWindowOptions;n&&t&&y&&y.invoke("preview-open",{previewBrowserWindowOptions:n,previewGameIndexHtmlPath:"file://".concat(t,"/index.html"),alwaysOnTop:e.state.alwaysOnTop,hideMenuBar:e.state.hideMenuBar})},e._openPreviewWindow=function(r,t,n){e.setState({previewBrowserWindowOptions:{width:r.getGameResolutionWidth(),height:r.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(r.getName()),backgroundColor:"#000000",webPreferences:{webSecurity:!1,nodeIntegration:!0,contextIsolation:!1}},previewGamePath:t,hideMenuBar:!n.getIsMenuBarHiddenInPreview(),alwaysOnTop:n.getIsAlwaysOnTopInPreview()},(function(){if(n.networkPreview){if(!y)return;y.removeAllListeners("serve-folder-done"),y.removeAllListeners("local-network-ips"),y.on("serve-folder-done",(function(r,t,n){t?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:t}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:n.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),y.on("local-network-ip",(function(r,t){e.setState({networkPreviewHost:t})})),y.send("serve-folder",{root:t}),y.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(d.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new s.a({downloadUrlsToLocalFiles:!1}),n=v()(new P.AbstractFileSystemJS,t);return{outputDir:O.join(n.getTempDir(),"preview"),exporter:new P.Exporter(n,r),gdjsRoot:r}}))},e.launchPreview=function(r){var t=r.project,n=r.layout,o=r.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.outputDir,c=a.exporter,u=a.gdjsRoot;Object(f.a)((function(){var a=new P.PreviewExportOptions(t,i);a.setIsDevelopmentEnvironment(g.b.isDev()),a.setLayoutName(n.getName()),o&&a.setExternalLayoutName(o.getName());var s=Object(j.a)();s&&a.useWebsocketDebuggerClientWithServerAddress(s.address,""+s.port);var l=e.props.getIncludeFileHashs();for(var p in l){var f=l[p];a.setIncludeFileHash(p,f)}a.setElectronRemoteRequirePath(O.join(u,"../preview_node_modules","@electron/remote","renderer/index.js"));var d=e.getPreviewDebuggerServer().getExistingDebuggerIds(),h=r.hotReload&&!!d.length;a.setProjectDataOnlyExport(h&&r.projectDataOnlyExport),a.setFullLoadingScreen(r.fullLoadingScreen),r.fallbackAuthor&&a.setFallbackAuthor(r.fallbackAuthor.id,r.fallbackAuthor.username),c.exportProjectForPixiPreview(a),a.delete(),c.delete(),h?(d.forEach((function(r){e.getPreviewDebuggerServer().sendMessage(r,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkUserHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(t,i,r)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkUserHasSubscription()},e}return Object(o.a)(t,[{key:"getPreviewDebuggerServer",value:function(){return j.b}},{key:"render",value:function(){var e=this,r=this.state,t=r.networkPreviewDialogOpen,n=r.networkPreviewHost,o=r.networkPreviewPort,a=r.networkPreviewError;return Object(x.jsxs)(u.Fragment,{children:[Object(x.jsx)(m.a,{ref:function(r){return e._networkPreviewSubscriptionChecker=r},onChangeSubscription:function(){return e.setState({networkPreviewDialogOpen:!1})},id:"Preview over wifi",title:Object(x.jsx)(c.Trans,{id:"Preview over wifi"}),mode:"try"}),Object(x.jsx)(m.a,{ref:function(r){return e._hotReloadSubscriptionChecker=r},id:"Hot reloading",title:Object(x.jsx)(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),Object(x.jsx)(h.a,{open:t,url:n&&o?"".concat(n,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow})]})}}]),t}(u.Component)}).call(this,t(25))},2282:function(e,r,t){"use strict";t.d(r,"a",(function(){return n}));var n=function(e,r){var t=performance.now();e(),r(performance.now()-t)}},2283:function(e,r,t){"use strict";t.d(r,"a",(function(){return v}));var n=t(6),o=t(5),a=t(10),i=t(11),c=t(9),u=t(17),s=t(303),l=t(298),p=t(311),f=t(296),d=t(295),h=t(323),b=t(8),v=function(e){Object(a.a)(t,e);var r=Object(i.a)(t);function t(){return Object(n.a)(this,t),r.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props,r=e.url,t=e.open,n=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return t?Object(b.jsxs)(s.c,{title:Object(b.jsx)(c.Trans,{id:"Preview"}),actions:[Object(b.jsx)(l.a,{label:Object(b.jsx)(c.Trans,{id:"Close"}),primary:!0,onClick:a},"close")],secondaryActions:[o&&Object(b.jsx)(l.a,{label:Object(b.jsx)(c.Trans,{id:"Export game"}),onClick:o},"export"),Object(b.jsx)(l.a,{label:Object(b.jsx)(c.Trans,{id:"Run on this computer"}),onClick:i},"run-preview-locally")],open:t,onRequestClose:a,children:[n&&Object(b.jsx)(d.c,{children:Object(b.jsx)(f.a,{children:Object(b.jsx)(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."})})}),!n&&!r&&Object(b.jsx)(h.a,{}),!n&&r&&Object(b.jsxs)("div",{children:[Object(b.jsx)(d.c,{children:Object(b.jsx)(f.a,{children:Object(b.jsx)(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"})})}),Object(b.jsx)(p.b,{value:r,fullWidth:!0}),Object(b.jsx)(d.c,{children:Object(b.jsx)(f.a,{children:Object(b.jsx)(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."})})})]})]}):null}}]),t}(u.Component)},2285:function(e,r,t){"use strict";t.d(r,"b",(function(){return l})),t.d(r,"a",(function(){return p}));var n=t(12),o=t.n(n)()("electron"),a=o?o.ipcRenderer:null,i="stopped",c=null,u=[],s=[],l={startServer:function(){if(!a)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,r){var t=!1;i="stopped",c=null,a&&(a.removeAllListeners("debugger-send-message-done"),a.removeAllListeners("debugger-error-received"),a.removeAllListeners("debugger-connection-closed"),a.removeAllListeners("debugger-connection-opened"),a.removeAllListeners("debugger-connection-errored"),a.removeAllListeners("debugger-start-server-done"),a.removeAllListeners("debugger-message-received")),a.on("debugger-error-received",(function(e,n){t||(r(n),t=!0),u.forEach((function(e){return(0,e.onErrorReceived)(n)}))})),a.on("debugger-connection-closed",(function(e,r){var t=r.id,n=s.indexOf(t);-1!==n&&s.splice(n,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:t,debuggerIds:s})}))})),a.on("debugger-connection-opened",(function(e,r){var t=r.id;s.push(t),u.forEach((function(e){return(0,e.onConnectionOpened)({id:t,debuggerIds:s})}))})),a.on("debugger-connection-errored",(function(e,r){var t=r.id,n=r.errorMessage;u.forEach((function(e){return(0,e.onConnectionErrored)({id:t,errorMessage:n})}))})),a.on("debugger-start-server-done",(function(r,n){var o=n.address;console.info("Local preview debugger started"),i="started",c=o,t||(e(),t=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),a.on("debugger-message-received",(function(e,r){var t=r.id,n=r.message;console.info("Processing message received for debugger");try{var o=JSON.parse(n);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:t,parsedMessage:o})}))}catch(a){console.warn("Error while parsing message received from debugger client:",a)}})),a.send("debugger-start-server")})),r=new Promise((function(e,r){setTimeout((function(){r(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,r])},sendMessage:function(e,r){a&&("stopped"!==i?a.send("debugger-send-message",{id:e,message:JSON.stringify(r)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getExistingDebuggerIds:function(){return s},registerCallbacks:function(e){return u.push(e),function(){var r=u.indexOf(e);-1!==r&&u.splice(r,1)}}},p=function(){return c}},2286:function(e,r,t){"use strict";t.d(r,"c",(function(){return j})),t.d(r,"a",(function(){return g})),t.d(r,"b",(function(){return x}));var n=t(3),o=t(2287),a=t(2288),i=t(2289),c=t(2290),u=t(2292),s=t(2293),l=t(2294),p=t(699),f=t(707),d=t(706),h=t(702),b=t(703),v=t(704),m=t(700),j=Object(n.a)(Object(n.a)({},f.c),{},{exportPipeline:l.a}),g=[Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:i.a}),Object(n.a)(Object(n.a)({},b.b),{},{exportPipeline:u.a}),Object(n.a)(Object(n.a)({},v.b),{},{exportPipeline:s.a}),Object(n.a)(Object(n.a)({},h.c),{},{exportPipeline:c.a})],x=[Object(n.a)(Object(n.a)({},d.c),{},{exportPipeline:i.a}),Object(n.a)(Object(n.a)({},p.c),{},{exportPipeline:o.a}),Object(n.a)(Object(n.a)({},m.c),{},{exportPipeline:a.a})]},2287:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(9),c=(t(17),t(305)),u=t(295),s=t(417),l=t(438),p=t(550),f=t(358),d=t.n(f),h=t(12),b=t.n(h),v=t(699),m=t(494),j=t(8),g=b()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var r=e.project,t=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(u.a,{noMargin:!0,children:Object(j.jsx)(v.b,{})})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(p.a,{type:"export",value:t.outputDir,defaultPath:r.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),r.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,t);return{exporter:new w.Exporter(n,r),localFileSystem:t}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,(c=new w.ExportOptions(r.project,r.exportState.outputDir)).setTarget("cordova"),n&&c.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(c),c.delete(),o.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(r.exportState.outputDir)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){return Promise.resolve(null)},renderDoneFooter:function(e){var r=e.exportState,t=(e.onClose,function(){x&&x.openPath(r.outputDir)});return Object(j.jsx)(v.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{label:Object(j.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:t},"open")}})}}}).call(this,t(25))},2288:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(9),c=(t(17),t(305)),u=t(295),s=t(417),l=t(438),p=t(550),f=t(358),d=t.n(f),h=t(12),b=t.n(h),v=t(700),m=t(494),j=t(8),g=b()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var r=e.project,t=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(u.a,{noMargin:!0,children:Object(j.jsx)(v.b,{})})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(p.a,{type:"export",value:t.outputDir,defaultPath:r.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),r.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,t);return{exporter:new w.Exporter(n,r),localFileSystem:t}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,(c=new w.ExportOptions(r.project,r.exportState.outputDir)).setTarget("electron"),n&&c.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(c),c.delete(),o.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(r.exportState.outputDir)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){return Promise.resolve(null)},renderDoneFooter:function(e){var r=e.exportState,t=(e.onClose,function(){x&&x.openPath(r.outputDir)});return Object(j.jsx)(v.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{label:Object(j.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:t},"open")}})}}}).call(this,t(25))},2289:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(9),c=(t(17),t(305)),u=t(295),s=t(417),l=t(438),p=t(550),f=t(358),d=t.n(f),h=t(12),b=t.n(h),v=t(706),m=t(494),j=t(8),g=b()("electron"),x=g?g.shell:null,w=e.gd,O={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},isNavigationDisabled:function(){return!1},renderHeader:function(e){var r=e.project,t=e.exportState,n=e.updateExportState;return Object(j.jsxs)(u.a,{noMargin:!0,children:[Object(j.jsx)(u.c,{children:Object(j.jsx)(v.b,{})}),Object(j.jsx)(u.c,{children:Object(j.jsx)(p.a,{type:"export",value:t.outputDir,defaultPath:r.getLastCompilationDirectory(),onChange:function(e){n((function(){return{outputDir:e}})),r.setLastCompilationDirectory(e)},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=d()(new w.AbstractFileSystemJS,t);return{exporter:new w.Exporter(n,r),localFileSystem:t}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,c=new w.ExportOptions(r.project,r.exportState.outputDir),n&&c.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(c),c.delete(),o.delete(),e.abrupt("return",{urlFiles:i.getAllUrlFilesIn(r.exportState.outputDir)});case 7:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.urlFiles,e.next=3,Object(m.a)({urlContainers:n,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){return Promise.resolve(null)},renderDoneFooter:function(e){var r=e.exportState;e.onClose;return Object(j.jsx)(v.a,{renderGameButton:function(){return Object(j.jsx)(c.a,{fullWidth:!0,primary:!0,onClick:function(){x&&x.openPath(r.outputDir)},label:Object(j.jsx)(i.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,t(25))},2290:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return S}));var n=t(2),o=t(0),a=t.n(o),i=t(9),c=(t(17),t(305)),u=t(295),s=t(417),l=t(438),p=t(358),f=t.n(p),d=t(12),h=t.n(d),b=t(2291),v=t(701),m=t(702),j=t(494),g=t(8),x=h()("path"),w=h()("electron"),O=h()("@electron/remote"),y=O?O.app:null,P=w?w.shell:null,k=e.gd,S={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:y?x.join(y.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},isNavigationDisabled:function(){return!1},renderHeader:function(e){e.project;var r=e.exportState,t=e.updateExportState;return Object(g.jsxs)(u.a,{noMargin:!0,children:[Object(g.jsx)(u.c,{children:Object(g.jsx)(m.b,{})}),Object(g.jsx)(u.c,{children:Object(g.jsx)(b.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:r.archiveOutputFilename,defaultPath:y?y.getPath("documents"):"",onChange:function(e){return t((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})})]})},renderLaunchButtonLabel:function(){return Object(g.jsx)(i.Trans,{id:"Package"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new l.a({downloadUrlsToLocalFiles:!0}),n=f()(new k.AbstractFileSystemJS,t),o=new k.Exporter(n,r),a=x.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,c=t.temporaryOutputDir,(u=new k.ExportOptions(r.project,c)).setTarget("facebookInstantGames"),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:i.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(j.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir;return Object(v.a)({path:t,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var r=e.exportState,t=(e.onClose,function(){P&&x&&P.openPath(x.dirname(r.archiveOutputFilename))});return Object(g.jsx)(m.a,{renderGameButton:function(){return Object(g.jsx)(c.a,{label:Object(g.jsx)(i.Trans,{id:"Open folder"}),primary:!0,onClick:t},"open")}})}}}).call(this,t(25))},2291:function(e,r,t){"use strict";var n=t(3),o=t(2),a=t(0),i=t.n(a),c=t(9),u=(t(17),t(311)),s=t(12),l=t.n(s),p=t(298),f=t(8),d=l()("electron"),h=l()("@electron/remote"),b=h?h.dialog:null,v={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}};r.a=function(e){var r=e.value,t=e.onChange,a=e.title,s=e.message,l=e.defaultPath,m=e.fullWidth,j=e.filters,g=function(){var e=Object(o.a)(i.a.mark((function e(){var r,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&d){e.next=2;break}return e.abrupt("return");case 2:return r=h.getCurrentWindow(),e.next=5,b.showSaveDialog(r,{title:a,filters:j,message:s,defaultPath:l});case 5:n=e.sent,o=n.filePath,t(o||"");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{style:Object(n.a)(Object(n.a)({},v.container),{},{width:m?"100%":void 0}),children:[Object(f.jsx)(u.b,{margin:"dense",style:v.textField,type:"text",translatableHintText:{id:"Choose a file"},value:r,onChange:function(e,r){return t(r)}}),Object(f.jsx)(p.a,{label:Object(f.jsx)(c.Trans,{id:"Choose"}),style:v.button,onClick:g})]})}},2292:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return y}));var n=t(2),o=t(3),a=t(0),i=t.n(a),c=t(9),u=(t(17),t(358)),s=t.n(u),l=t(377),p=t(875),f=t(417),d=t(701),h=t(12),b=t.n(h),v=t(438),m=t(703),j=t(494),g=t(8),x=b()("path"),w=b()("os"),O=e.gd,y={name:"local-online-cordova",onlineBuildType:"cordova-build",limitedBuilds:!0,packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(e,r,t){return r||""===t},isNavigationDisabled:function(e,r){return!r&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(g.jsx)(m.a,Object(o.a)({},e))},renderLaunchButtonLabel:function(){return Object(g.jsx)(c.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(f.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new v.a({downloadUrlsToLocalFiles:!0}),n=s()(new O.AbstractFileSystemJS,t),o=new O.Exporter(n,r),a=x.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(i.a.mark((function e(r,t,n){var o,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,a=t.localFileSystem,c=t.temporaryOutputDir,(u=new O.ExportOptions(r.project,c)).setTarget("cordova"),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:a.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(i.a.mark((function e(r,t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(j.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir,n=w.tmpdir();return Object(d.a)({path:t,outputFilename:x.join(n,"game-archive.zip")})},launchUpload:function(e,r){return Object(l.g)().then((function(t){return Object(p.a)(r,t,e.updateStepProgress).then((function(){return t.key}))}))},launchOnlineBuild:function(e,r,t,n,o){var a=r.getAuthorizationHeader,i=r.firebaseUser;return i?Object(l.a)(a,i.uid,t,e.targets,e.keystore,n,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,t(25))},2293:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return y}));var n=t(2),o=t(3),a=t(0),i=t.n(a),c=t(9),u=(t(17),t(358)),s=t.n(u),l=t(377),p=t(417),f=t(875),d=t(701),h=t(12),b=t.n(h),v=t(438),m=t(704),j=t(494),g=t(8),x=b()("path"),w=b()("os"),O=e.gd,y={name:"local-online-electron",onlineBuildType:"electron-build",limitedBuilds:!0,packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e,r,t){return!!e.targets.length&&(r||""===t)},isNavigationDisabled:function(e,r){return!r&&["register","export","resources-download","compress","upload"].includes(e)},renderHeader:function(e){return Object(g.jsx)(m.a,Object(o.a)({},e))},renderLaunchButtonLabel:function(){return Object(g.jsx)(c.Trans,{id:"Package"})},prepareExporter:function(e){return Object(p.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new v.a({downloadUrlsToLocalFiles:!0}),n=s()(new O.AbstractFileSystemJS,t),o=new O.Exporter(n,r),a=x.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(i.a.mark((function e(r,t,n){var o,a,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,a=t.localFileSystem,c=t.temporaryOutputDir,(u=new O.ExportOptions(r.project,c)).setTarget("electron"),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:a.getAllUrlFilesIn(c)});case 8:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(i.a.mark((function e(r,t){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(j.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir,n=w.tmpdir();return Object(d.a)({path:t,outputFilename:x.join(n,"game-archive.zip")})},launchUpload:function(e,r){return Object(l.g)().then((function(t){return Object(f.a)(r,t,e.updateStepProgress).then((function(){return t.key}))}))},launchOnlineBuild:function(e,r,t,n,o){var a=r.getAuthorizationHeader,i=r.firebaseUser;return i?Object(l.b)(a,i.uid,t,e.targets,n,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,t(25))},2294:function(e,r,t){"use strict";(function(e){t.d(r,"a",(function(){return O}));var n=t(2),o=t(0),a=t.n(o),i=t(9),c=(t(17),t(358)),u=t.n(c),s=t(377),l=t(875),p=t(417),f=t(701),d=t(12),h=t.n(d),b=t(438),v=t(707),m=t(494),j=t(8),g=h()("path"),x=h()("os"),w=e.gd,O={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(e,r,t){return r||""===t||"done"===t},isNavigationDisabled:function(e,r){return!r&&!["","done"].includes(e)},renderHeader:function(){return Object(j.jsx)(v.a,{})},renderLaunchButtonLabel:function(){return Object(j.jsx)(i.Trans,{id:"Generate link"})},renderCustomStepsProgress:function(e){var r=e.build,t=e.project,n=e.onSaveProject,o=e.errored,a=e.exportStep;return Object(j.jsx)(v.b,{build:r,project:t,onSaveProject:n,errored:o,exportStep:a})},prepareExporter:function(e){return Object(p.findGDJS)().then((function(e){var r=e.gdjsRoot;console.info("GDJS found in ",r);var t=new b.a({downloadUrlsToLocalFiles:!0}),n=u()(new w.AbstractFileSystemJS,t),o=new w.Exporter(n,r),a=g.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(a),n.clearDir(a),{exporter:o,localFileSystem:t,temporaryOutputDir:a}}))},launchExport:function(){var e=Object(n.a)(a.a.mark((function e(r,t,n){var o,i,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.exporter,i=t.localFileSystem,c=t.temporaryOutputDir,u=new w.ExportOptions(r.project,c),n&&u.setFallbackAuthor(n.id,n.username),o.exportWholePixiProject(u),u.delete(),o.delete(),e.abrupt("return",{temporaryOutputDir:c,urlFiles:i.getAllUrlFilesIn(c)});case 7:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),launchResourcesDownload:function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.temporaryOutputDir,o=t.urlFiles,e.next=3,Object(m.a)({urlContainers:o,onProgress:r.updateStepProgress,throwIfAnyError:!0});case 3:return e.abrupt("return",{temporaryOutputDir:n});case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),launchCompression:function(e,r){var t=r.temporaryOutputDir,n=x.tmpdir();return Object(f.a)({path:t,outputFilename:g.join(n,"game-archive.zip"),sizeLimit:25e7})},launchUpload:function(e,r){return Object(s.g)().then((function(t){return Object(l.a)(r,t,e.updateStepProgress).then((function(){return t.key}))}))},launchOnlineBuild:function(e,r,t,n,o){var a=r.getAuthorizationHeader,i=r.firebaseUser;return i?Object(s.c)(a,i.uid,t,n,o):Promise.reject(new Error("User is not authenticated"))}}}).call(this,t(25))},2295:function(e,r,t){"use strict";var n=t(17),o=t(12),a=t.n(o),i=t(434),c=t(1245),u=a()("electron"),s=u?u.ipcRenderer:null,l=function(e,r){n.useEffect((function(){if(s){var t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return r.apply(void 0,n)};return s.on(e,t),function(){return s.removeListener(e,t)}}}),[e,r])};r.a=function(e){var r=e.props,t=e.callbacks,o=r.i18n,a=r.project,u=r.recentProjectFiles,p=r.shortcutMap,f=o.language;l("main-menu-open",t.onChooseProject),l("main-menu-open-recent",t.onOpenRecentFile),l("main-menu-save",t.onSaveProject),l("main-menu-save-as",t.onSaveProjectAs),l("main-menu-close",t.onCloseProject),l("main-menu-close-app",t.onCloseApp),l("main-menu-export",t.onExportProject),l("main-menu-create-template",t.onCreateProject),l("main-menu-create-blank",t.onCreateBlank),l("main-menu-open-project-manager",t.onOpenProjectManager),l("main-menu-open-home-page",t.onOpenHomePage),l("main-menu-open-debugger",t.onOpenDebugger),l("main-menu-open-about",t.onOpenAbout),l("main-menu-open-preferences",t.onOpenPreferences),l("main-menu-open-language",t.onOpenLanguage),l("main-menu-open-profile",t.onOpenProfile),l("main-menu-open-games-dashboard",t.onOpenGamesDashboard),l("update-status",t.setElectronUpdateStatus),n.useEffect((function(){s&&s.send("set-main-menu",Object(c.b)({project:a,i18n:o,recentProjectFiles:u,shortcutMap:p,isApplicationTopLevelMenu:!0}))}),[o,f,a,u,p]);var d=t.onOpenRecentFile;return Object(i.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:n.useCallback((function(){return u.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return d(e)}}}))}),[d,u])}),null}},2296:function(e,r,t){var n=t(1252).loadExtension,o=t(12),a=t(2297).findJsExtensionModules;e.exports=function(e){var r=e.gd,t=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return a({filterExamples:c,onFindGDJS:u}).then((function(a){return Promise.all(a.map((function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(u){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(t&&c.registerEditorConfigurations&&c.registerEditorConfigurations(t),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:n(e,r,r.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},2297:function(e,r,t){var n=t(417).findGDJS,o=t(12),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var r=e.filterExamples,t=e.onFindGDJS;return(t?t():n()).then((function(e){var t=e.gdjsRoot,n=a.join(t,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(n,"...")),new Promise((function(e,t){i.readdir(n,(function(o,c){if(o)return t(o);var u=c.filter((function(e){return!r||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return r=a.join(n,e),new Promise((function(e){var t=a.join(r,"JsExtension.js");i.stat(t,(function(r,n){return e(r?null:n.isFile()?t:null)}))}));var r}))).then((function(r){e(r.filter((function(e){return!!e})))}),t)}))}))}))}}},2298:function(e,r,t){"use strict";t.d(r,"a",(function(){return p}));var n=t(12),o=t.n(n),a=t(1250),i=t(665),c=t.n(i),u=o()("path"),s=o()("os"),l=o()("fs"),p=function(e){var r=e.onWriteFile,t=u.join(s.tmpdir(),"GDGeneratedEventsFunctions-"+Object(a.a)());l.mkdir(t,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var n=function(e){return"".concat(t,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return n(e)},writeFunctionCode:function(e,t){return new Promise((function(o,a){var i=n(e);r({includeFile:i,content:t}),l.writeFile(i,t,(function(e){if(e)return a(e);o()}))}))},writeBehaviorCode:function(e,t){return new Promise((function(o,a){var i=n(e);r({includeFile:i,content:t}),l.writeFile(i,t,(function(e){if(e)return a(e);o()}))}))},writeObjectCode:function(e,t){return new Promise((function(o,a){var i=n(e);r({includeFile:i,content:t}),l.writeFile(i,t,(function(e){if(e)return a(e);o()}))}))}}}},2310:function(e,r,t){"use strict";t.d(r,"a",(function(){return d}));var n=t(5),o=t(6),a=t(338),i=t(12),c=t.n(i),u=c()("fs-extra"),s=c()("path"),l=c()("@electron/remote"),p=l?l.dialog:null,f=function(e,r){if(!u)return Promise.reject(new Error("Filesystem is not supported."));try{var t=JSON.stringify(e,null,2);return u.ensureDir(s.dirname(r)).then((function(){return new Promise((function(e,n){u.writeFile(r,t,(function(r){return r?n(r):e()}))}))}))}catch(n){return Promise.reject(n)}},d=Object(n.a)((function e(){Object(o.a)(this,e)}));d.chooseEventsFunctionExtensionFile=function(e){if(!p)return Promise.reject("Not supported");var r=l.getCurrentWindow();return p.showSaveDialog(r,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:e||"Extension.json"}).then((function(e){var r=e.filePath;return r||null}))},d.writeEventsFunctionsExtension=function(e,r){var t=Object(a.b)(e);return f(t,r).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))},d.chooseCustomObjectFile=function(e){if(!p)return Promise.reject("Not supported");var r=l.getCurrentWindow();return p.showSaveDialog(r,{title:"Export an object of the project",filters:[{name:"GDevelop 5 object configuration",extensions:["gdo"]}],defaultPath:e||"Object"}).then((function(e){var r=e.filePath;return r||null}))},d.writeCustomObject=function(e,r){var t=e.clone().get();t.setTags(""),t.getVariables().clear(),t.getEffects().clear(),t.getAllBehaviorNames().toJSArray().forEach((function(e){return t.removeBehavior(e)}));var n=Object(a.b)(t);return f(n,r).catch((function(e){throw console.error("Unable to write the object:",e),e}))}},2311:function(e,r,t){"use strict";t.d(r,"a",(function(){return l}));var n=t(5),o=t(6),a=t(12),i=t.n(a),c=i()("fs"),u=i()("@electron/remote"),s=u?u.dialog:null,l=Object(n.a)((function e(){Object(o.a)(this,e)}));l.chooseEventsFunctionExtensionFile=function(){if(!s)return Promise.reject("Not supported");var e=u.getCurrentWindow();return s.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var r=e.filePaths;return r&&r.length?r[0]:null}))},l.readEventsFunctionExtensionFile=function(e){return function(e){return c?new Promise((function(r,t){c.readFile(e,{encoding:"utf8"},(function(n,o){if(n)return t(n);try{var a=JSON.parse(o);return r(a)}catch(i){return t(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},2312:function(e,r,t){"use strict";t.d(r,"a",(function(){return s}));var n=t(17),o=t(12),a=t.n(o),i=t(39),c=a()("electron"),u=c?c.ipcRenderer:null,s=function(){var e=n.useContext(i.a).values.useGDJSDevelopmentWatcher;return n.useEffect((function(){if(e){if(u)return u.send("setup-local-gdjs-development-watcher"),function(){u.send("close-local-gdjs-development-watcher")};console.error("Unable to find ipcRenderer to set up GDJS development watchers")}}),[e]),null}},2313:function(e,r,t){"use strict";(function(e){var n,o=t(1),a=t(2),i=t(0),c=t.n(i),u=t(881),s=t(1255),l=t(492),p=t(537),f=t(438),d=t(358),h=t.n(d),b=t(12),v=t.n(b),m=t(1257),j=t(451),g=t(372),x=t(2314),w=t(2315),O=t(354),y=v()("path"),P=e.gd,k=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{erroredResources:[]});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n,o,i,u,s,l,p,f,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.project,n=r.authenticatedUser,o=r.oldFileMetadata,i=r.newFileMetadata,u=r.onProgress,s={erroredResources:[]},l=i.fileIdentifier,p=t.getResourcesManager(),f=function(e){return p.getAllResourceNames().toJSArray().map((function(e){var r=p.getResource(e),t=r.getFile();return Object(O.h)(t)?Object(j.c)(t)?null:Object(O.e)(t)?(s.erroredResources.push({resourceName:r.getName(),error:new Error("Unsupported blob URL.")}),null):null:r})).filter(Boolean)}(),d=y.dirname(o.fileIdentifier),h=0,e.next=10,Object(x.a)(f,{transformItem:function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.resolve(d,r.getFile()),e.prev=1,e.next=4,Object(w.a)(t);case 4:return n=e.sent,e.abrupt("return",{resource:r,file:n});case 8:return e.prev=8,e.t0=e.catch(1),s.erroredResources.push({resourceName:r.getName(),error:new Error("Unable to open the file (".concat(t,")."))}),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(r){return e.apply(this,arguments)}}(),isChunkTooBig:function(e){return e.length>70||e.filter(Boolean).reduce((function(e,r){return e+r.file.size}),0)>15e7},processChunk:function(){var e=Object(a.a)(c.a.mark((function e(r){var t,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.filter(Boolean),e.next=3,Object(g.k)(n,l);case 3:return e.next=5,Object(g.p)(n,l,t.map((function(e){return e.file})),(function(e,r){u(h+e,f.length)}));case 5:o=e.sent,h+=r.length,o.forEach((function(e,r){var n=e.url,o=e.error,a=t[r].resource;!o&&n?a.setFile(n):s.erroredResources.push({resourceName:a.getName(),error:o||new Error("Unknown error during upload.")})}));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()});case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),F=(n={},Object(o.a)(n,"".concat(u.a.internalName,"=>").concat(u.a.internalName),function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.project,n=r.newFileMetadata,o=y.dirname(n.fileIdentifier),a=h()(new P.AbstractFileSystemJS,new f.a),P.ProjectResourcesCopier.copyAllResourcesTo(t,a,o,!0,!1,!0),e.abrupt("return",{erroredResources:[]});case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),Object(o.a)(n,"".concat(p.a.internalName,"=>").concat(u.a.internalName),(function(e){var r=e.project,t=e.newFileMetadata,n=e.onProgress;return Object(s.a)({project:r,fileMetadata:t,onProgress:n})})),Object(o.a)(n,"".concat(l.a.internalName,"=>").concat(u.a.internalName),(function(e){var r=e.project,t=e.newFileMetadata,n=e.onProgress;return Object(s.a)({project:r,fileMetadata:t,onProgress:n})})),Object(o.a)(n,"".concat(u.a.internalName,"=>").concat(p.a.internalName),S),Object(o.a)(n,"".concat(p.a.internalName,"=>").concat(p.a.internalName),m.a),Object(o.a)(n,"".concat(l.a.internalName,"=>").concat(p.a.internalName),k),n),E={moveAllProjectResources:function(){var e=Object(a.a)(c.a.mark((function e(r){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.oldStorageProvider,n=r.newStorageProvider,o=F["".concat(t.internalName,"=>").concat(n.internalName)]){e.next=4;break}throw new Error("Can't find a ResourceMover for ".concat(t.internalName," to ").concat(n.internalName,"."));case 4:return e.abrupt("return",o(r));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.a=E}).call(this,t(25))},2314:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var n=t(2),o=t(0),a=t.n(o),i=function(){var e=Object(n.a)(a.a.mark((function e(r,t){var n,o,i,c,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transformItem,o=t.isChunkTooBig,i=t.processChunk,c=0,u=[];case 3:if(!(c<r.length)){e.next=20;break}return e.next=6,n(r[c]);case 6:if(s=e.sent,u.length){e.next=10;break}e.next=16;break;case 10:if(o([].concat(u,[s]))){e.next=13;break}e.next=16;break;case 13:return e.next=15,i(u);case 15:u.length=0;case 16:u.push(s),c++,e.next=3;break;case 20:if(!u.length){e.next=24;break}return e.next=23,i(u);case 23:u.length=0;case 24:return e.abrupt("return");case 25:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},2315:function(e,r,t){"use strict";t.d(r,"a",(function(){return f}));var n=t(2),o=t(0),a=t.n(o),i=t(12),c=t.n(i),u=c()("path"),s=c()("fs"),l=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){s.readFile(r,(function(r,n){r?t(r):e(n)}))}));case 2:return t=e.sent,n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p={aac:"audio/aac",wav:"audio/wav",mp3:"audio/mp3",ogg:"audio/ogg",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",webp:"image/webp",ttf:"font/ttf",otf:"font/otf",mp4:"video/mp4",webm:"video/webm",json:"application/json",xml:"application/xml",gz:"application/gzip",js:"application/javascript"},f=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:return t=e.sent,n=u.extname(r).replace(/^\./,""),e.abrupt("return",new File([t],u.basename(r),{type:p[n]||"application/octet-stream"}));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},2316:function(e,r,t){"use strict";var n,o=t(2),a=t(1),i=t(0),c=t.n(i),u=t(881),s=t(1255),l=t(492),p=t(537),f=t(1258),d=t(1259),h=(n={},Object(a.a)(n,p.a.internalName,d.a),Object(a.a)(n,u.a.internalName,s.a),Object(a.a)(n,l.a.internalName,f.a),n),b={fetchAllProjectResources:function(){var e=Object(o.a)(c.a.mark((function e(r){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.storageProvider,n=h[t.internalName]){e.next=4;break}throw new Error("Can't find a ResourceFetcher for ".concat(t.internalName," - have you registered the storage provider here?"));case 4:return e.abrupt("return",n(r));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};r.a=b},2503:function(e,r,t){"use strict";var n=t(24),o=t(2),a=t(19),i=t(0),c=t.n(i),u=t(9),s=(t(17),t(534)),l=t(883),p=t(354),f=t(12),d=t.n(f),h=t(26),b=t(34),v=t(95),m=d()("fs"),j=d()("path");function g(e,r){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(c.a.mark((function e(r,t){var o,a,i,u,s,l,p,f,d,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&j){e.next=2;break}return e.abrupt("return");case 2:o=j.dirname(r.getProjectFile()),a=[],i=Object(n.a)(t.values()),e.prev=5,i.s();case 7:if((u=i.n()).done){e.next=31;break}if(s=u.value,l=s.hasAnyEmbeddedResourceOutsideProjectFolder,p=s.embeddedResources,l){e.next=11;break}return e.abrupt("continue",29);case 11:f=Object(n.a)(p.values()),e.prev=12,h=function(){var e=d.value;if(!e.isOutsideProjectFolder)return"continue";var r=j.basename(e.fullPath),t=j.extname(r),n=j.basename(r,t),i=Object(v.a)(n,(function(e){var r=j.join(o,e)+t;return m.existsSync(r)})),c=j.join(o,i+t);e.resourceName=i+t,a.push(m.promises.copyFile(e.fullPath,c))},f.s();case 15:if((d=f.n()).done){e.next=21;break}if("continue"!==h()){e.next=19;break}return e.abrupt("continue",19);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),f.e(e.t0);case 26:return e.prev=26,f.f(),e.finish(26);case 29:e.next=7;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(5),i.e(e.t1);case 36:return e.prev=36,i.f(),e.finish(36);case 39:return e.abrupt("return",Promise.all(a));case 40:case"end":return e.stop()}}),e,null,[[5,33,36,39],[12,23,26,29]])})))).apply(this,arguments)}function w(e,r){var t,o=j.dirname(e.getProjectFile()),a=new Map,i=Object(n.a)(r);try{for(i.s();!(t=i.n()).done;){var c,u=Object(b.a)(t.value,2),l=u[0],p=u[1].embeddedResources,f={},d=Object(n.a)(p.values());try{for(d.s();!(c=d.n()).done;){var h=c.value,v=h.resourceKind,m=h.resourceName,g=h.relPath,x=h.fullPath;m||(m=j.relative(o,x));var w=Object(s.b)(v);w&&(w.setName(m),w.setFile(m),f[g]=m,e.getResourcesManager().addResource(w))}}catch(O){d.e(O)}finally{d.f()}a.set(l,{mapping:f})}}catch(O){i.e(O)}finally{i.f()}return a}function O(e,r){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(c.a.mark((function e(r,t){var o,a,i,u,s,l,f,d,h,b,v,g,x,w,O,y,P,k,S;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m&&j){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,m.promises.readFile(t,"utf8");case 4:if(o=e.sent,e.prev=5,!(a=JSON.parse(o))||!a.__header__||"LDtk"!==a.__header__.app){e.next=16;break}i=j.dirname(t),u=new Map,s=!1,l=Object(n.a)(a.defs.tilesets);try{for(l.s();!(f=l.n()).done;)(d=f.value).relPath&&(h=d.relPath,b=j.resolve(i,h),v=!Object(p.g)(r,b),g={resourceKind:"image",relPath:h,fullPath:b,isOutsideProjectFolder:v},u.set(h,g),v&&(s=!0))}catch(c){l.e(c)}finally{l.f()}x=Object(n.a)(a.levels);try{for(x.s();!(w=x.n()).done;)(O=w.value).bgRelPath&&(y=O.bgRelPath,P=j.resolve(i,y),k=!Object(p.g)(r,P),S={resourceKind:"image",relPath:y,fullPath:P,isOutsideProjectFolder:k},u.set(O.bgRelPath,S),k&&(s=!0))}catch(c){x.e(c)}finally{x.f()}return e.abrupt("return",{hasAnyEmbeddedResourceOutsideProjectFolder:s,embeddedResources:u});case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(5),console.error("Unable to read properly the data from file ".concat(t," for use as a tilemap - ignoring any potentially embedded resources.")),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[5,18]])})))).apply(this,arguments)}var P={tilemap:O,json:O},k=t(295),S=t(305),F=t(1248),E=t(8),D=d()("@electron/remote"),C=D?D.dialog:null,N=d()("path"),R=function(e){var r=e.options,t=e.onChooseResources,n=e.createNewResource;return Object(E.jsx)(l.a,{onChoose:function(e){var r=e.url,o=n();o.setFile(r),o.setName(N.basename(r)),o.setOrigin("gdevelop-asset-store",r),t([o])},resourceKind:r.resourceKind})},A=[].concat(Object(a.a)(s.a.map((function(e){var r=e.kind,t=(e.displayName,e.fileExtensions),a=e.createNewResource,i=function(){var e=Object(o.a)(c.a.mark((function e(o){var i,u,s,l,f,d,b,v,m,j,x,O,y,k,S,F,E,R,A,L,T;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.i18n,u=o.getLastUsedPath,s=o.setLastUsedPath,l=o.project,f=o.options,C){e.next=3;break}throw new Error("Electron dialog not supported in this environment.");case 3:return d=["openFile"],f.multiSelection&&d.push("multiSelections"),b=N.dirname(l.getProjectFile()),v=u(l,r)||b,m=D.getCurrentWindow(),e.next=10,C.showOpenDialog(m,{title:i._({id:"Choose a file"}),properties:d,filters:[{name:i._({id:"Supported files"}),extensions:t}],defaultPath:v});case 10:if(j=e.sent,(x=j.filePaths)&&x.length){e.next=14;break}return e.abrupt("return",[]);case 14:if(O=N.parse(x[0]).dir,s(l,r,O),y=x.some((function(e){return!Object(p.g)(l,e)})),k=new Map,!(S=P[r])){e.next=39;break}F=Object(n.a)(x),e.prev=21,F.s();case 23:if((E=F.n()).done){e.next=31;break}return R=E.value,e.next=27,S(l,R);case 27:(A=e.sent)&&(k.set(R,A),A.hasAnyEmbeddedResourceOutsideProjectFolder&&(y=!0));case 29:e.next=23;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(21),F.e(e.t0);case 36:return e.prev=36,F.f(),e.finish(36);case 39:if(L=new Map,T=new Map,!y){e.next=49;break}if(!h.b.showConfirmDialog(i._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"}))){e.next=49;break}return e.next=46,Object(p.b)(l,x,L);case 46:return x=e.sent,e.next=49,g(l,k);case 49:return T=w(l,k),e.abrupt("return",x.map((function(e){var r=a();r.setFile(N.relative(b,e)),r.setName(N.relative(b,e));var t=L.has(e)?L.get(e):e;if(t){var n=T.get(t);n&&n.mapping&&r.setMetadata(JSON.stringify({embeddedResourcesMapping:n.mapping}))}return r})));case 51:case"end":return e.stop()}}),e,null,[[21,33,36,39]])})));return function(r){return e.apply(this,arguments)}}();return{name:"local-file-opener-"+r,displayName:{id:"Choose a file"},displayTab:"import",onlyForStorageProvider:"LocalFile",kind:r,selectResourcesHeadless:i,renderComponent:function(e){return Object(E.jsx)(k.c,{justifyContent:"center",children:Object(E.jsx)(S.a,{primary:!0,label:e.options.multiSelection?Object(E.jsx)(u.Trans,{id:"Choose one or more files"}):Object(E.jsx)(u.Trans,{id:"Choose a file"}),onClick:Object(o.a)(c.a.mark((function r(){var t;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i({i18n:e.i18n,project:e.project,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,getLastUsedPath:e.getLastUsedPath,setLastUsedPath:e.setLastUsedPath,options:e.options});case 2:t=r.sent,e.onChooseResources(t);case 4:case"end":return r.stop()}}),r)})))})})}}}))),Object(a.a)(s.a.map((function(e){var r=e.kind,t=e.createNewResource;return{name:"upload-".concat(r),displayName:{id:"File(s) from your device"},displayTab:"import",onlyForStorageProvider:"Cloud",kind:r,renderComponent:function(e){return Object(E.jsx)(F.a,{createNewResource:t,onChooseResources:e.onChooseResources,options:e.options,fileMetadata:e.fileMetadata,getStorageProvider:e.getStorageProvider,automaticallyOpenInput:!!e.automaticallyOpenIfPossible},"url-chooser-".concat(r))}}}))),Object(a.a)(s.a.map((function(e){var r=e.kind,t=e.createNewResource;return{name:"resource-store-".concat(r),displayName:{id:"Choose from asset store"},displayTab:"standalone",kind:r,renderComponent:function(e){return Object(E.jsx)(R,{createNewResource:t,onChooseResources:e.onChooseResources,options:e.options},"resource-store-".concat(r))}}}))));r.a=A},289:function(e,r,t){"use strict";t.r(r),function(e){t.d(r,"create",(function(){return D}));var n=t(3),o=(t(17),t(904)),a=t(26),i=t(1270),c=(t(67),t(166),t(2503)),u=t(2280),s=t(2281),l=t(2286),p=t(2295),f=t(2296),d=t.n(f),h=t(2298),b=t(588),v=t(378),m=t(1265),j=t(2310),g=t(2311),x=t(690),w=t(881),O=t(2312),y=t(537),P=t(492),k=t(2313),S=t(2316),F=t(8),E=e.gd,D=function(e){a.b.setUpContextMenu();var r=a.b.getArguments(),t=a.b.isDev();return Object(F.jsx)(m.a,{authentication:e,disableCheckForUpdates:!!r["disable-update-check"],makeEventsFunctionCodeWriter:h.a,eventsFunctionsExtensionWriter:j.a,eventsFunctionsExtensionOpener:g.a,children:function(e){var a=e.i18n;return Object(F.jsx)(x.a,{appArguments:r,storageProviders:[w.a,P.a,y.a],defaultStorageProvider:w.a,children:function(e){var r=e.getStorageProviderOperations,f=e.storageProviders,h=e.initialFileMetadataToOpen,m=e.getStorageProvider;return Object(F.jsx)(o.a,{i18n:a,renderMainMenu:function(e,r){return Object(F.jsx)(p.a,{props:e,callbacks:r})},renderPreviewLauncher:function(e,r){return Object(F.jsx)(s.a,Object(n.a)(Object(n.a)({},e),{},{ref:r}))},renderExportDialog:function(e){return Object(F.jsx)(i.a,{project:e.project,onSaveProject:e.onSaveProject,onChangeSubscription:e.onChangeSubscription,onClose:e.onClose,automatedExporters:l.a,manualExporters:l.b,onlineWebExporter:l.c})},renderGDJSDevelopmentWatcher:t?function(){return Object(F.jsx)(O.a,{})}:null,storageProviders:f,resourceMover:k.a,resourceFetcher:S.a,getStorageProviderOperations:r,getStorageProvider:m,resourceSources:c.a,resourceExternalEditors:u.a,extensionsLoader:d()({gd:E,objectsEditorService:b.a,objectsRenderingService:v.a,filterExamples:!t}),initialFileMetadataToOpen:h})}})}})}}.call(this,t(25))},438:function(e,r,t){"use strict";(function(e){var n=t(5),o=t(6),a=t(12),i=t.n(a),c=t(1250),u=t(354),s=i()("fs-extra"),l=i()("path"),p=i()("os"),f=e.gd,d=l.posix||l,h=Object(n.a)((function e(r){var t=this;Object(o.a)(this,e),this._filesToDownload={},this.getAllUrlFilesIn=function(e){var r=d.normalize(e).replace(/\\/g,"/");return Object.keys(t._filesToDownload).filter((function(e){return 0===e.indexOf(r)})).map((function(e){return{filePath:e,url:t._filesToDownload[e]}}))},this.mkDir=function(e){if(!Object(u.h)(e)){try{s.mkdirsSync(e)}catch(r){return console.error("mkDir("+e+") failed: "+r),!1}return!0}},this.dirExists=function(e){return!!Object(u.h)(e)||s.existsSync(e)},this.clearDir=function(e){try{s.emptyDirSync(e)}catch(r){console.error("clearDir("+e+") failed: "+r)}},this.getTempDir=function(){return l.join(p.tmpdir(),"GDTMP-".concat(Object(c.a)()))},this.fileNameFrom=function(e){return!t._downloadUrlsToLocalFiles&&Object(u.h)(e)?e:l.basename(e)},this.dirNameFrom=function(e){return l.dirname(e).replace(/\\/g,"/")},this.makeAbsolute=function(e,r){return Object(u.h)(e)?e:(t.isAbsolute(r)||(r=l.resolve(r)),l.resolve(r,l.normalize(e)).replace(/\\/g,"/"))},this.makeRelative=function(e,r){return Object(u.h)(e)?e:l.relative(r,l.normalize(e)).replace(/\\/g,"/")},this.isAbsolute=function(e){return!!Object(u.h)(e)||(0===e.length||(e.length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},this.copyFile=function(e,r){if(Object(u.h)(e))return!t._downloadUrlsToLocalFiles||(Object(u.h)(r)?(console.error("Destination can't be a URL in copyFile (from ".concat(e," to ").concat(r,").")),!1):(t._filesToDownload[d.normalize(r)]=e,!0));try{e!==r&&s.copySync(e,r)}catch(n){return console.error("copyFile("+e+", "+r+") failed: "+n),!1}return!0},this.writeToFile=function(e,r){try{s.outputFileSync(e,r)}catch(t){return console.error("writeToFile("+e+", ...) failed: "+t),!1}return!0},this.readFile=function(e){try{return s.readFileSync(e).toString()}catch(r){return console.error("readFile("+e+") failed: "+r),""}},this.readDir=function(e,r){r=r.toUpperCase();var t=new f.VectorString;try{s.existsSync(e)&&s.readdirSync(e).forEach((function(n){0!==r.length&&-1===n.toUpperCase().indexOf(r,n.length-r.length)||t.push_back(e+"/"+n)}))}catch(n){console.error("readDir("+e+","+r+") failed: "+n)}return t},this.fileExists=function(e){var r=d.normalize(e);if(!!t._filesToDownload[r])return!0;try{return s.statSync(e).isFile()}catch(n){return!1}},this._downloadUrlsToLocalFiles=!!r&&r.downloadUrlsToLocalFiles}));r.a=h}).call(this,t(25))},494:function(e,r,t){"use strict";t.d(r,"a",(function(){return f}));var n=t(2),o=t(0),a=t.n(o),i=t(476),c=t.n(i),u=t(1251),s=t(12),l=t.n(s)()("electron"),p=l?l.ipcRenderer:null,f=function(){var e=Object(n.a)(a.a.mark((function e(r){var t,o,i,s,l,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.urlContainers,o=r.onProgress,i=r.throwIfAnyError,s=0,l=null,p){e.next=5;break}throw new Error("Download to local files is not supported.");case 5:return e.next=7,c.a.withConcurrency(20).for(t).process(function(){var e=Object(n.a)(a.a.mark((function e(r){var i,c,f,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.url,c=r.filePath,e.prev=1,e.next=4,Object(u.a)({times:2},Object(n.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.invoke("local-file-download",i,c);case 2:case"end":return e.stop()}}),e)}))));case 4:return f={item:r},e.abrupt("return",f);case 8:return e.prev=8,e.t0=e.catch(1),l=e.t0,d={item:r,error:e.t0},e.abrupt("return",d);case 13:return e.prev=13,o(s++,t.length),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,8,13,16]])})));return function(r){return e.apply(this,arguments)}}());case 7:if(f=e.sent,d=f.results,!i||!l){e.next=11;break}throw l;case 11:return e.abrupt("return",d);case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},701:function(e,r,t){"use strict";t.d(r,"a",(function(){return u}));var n=t(12),o=t.n(n),a=t(780),i=o()("fs"),c=Object(a.a)("archiver"),u=function(e){var r=e.path,t=e.outputFilename,n=e.sizeLimit,o=c();return new Promise((function(e,a){if(!i||!o)return a(new Error("Archiver unavailable"));var c=i.createWriteStream(t),u=o("zip",{zlib:{level:9}});c.on("close",(function(){var r=u.pointer();if(console.log("Archive written at ".concat(t,", ").concat(r," total bytes.")),n&&r>n){var o=Math.round(r/1e6);a(new Error("Archive is of size ".concat(o," MB, which is above the limit allowed of ").concat(n/1e6," MB.")))}e(t)})),u.on("error",(function(e){a(e)})),u.pipe(c),u.directory(r,!1),u.finalize()}))}},875:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));var n=t(12),o=t.n(n)()("electron"),a=o?o.ipcRenderer:null,i=function(e,r,t){return a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((function(n,o){a.on("local-file-upload-progress",(function(e,r,n){t(r,n)})),a.on("local-file-upload-done",(function(e,r){if(r)return o(r);n()})),a.send("local-file-upload",e,r)}))):Promise.reject("No support for local file upload")}},881:function(e,r,t){"use strict";var n=t(17),o=t.n(n),a=t(3),i=t(2),c=t(0),u=t.n(c),s=t(12),l=t.n(s),p=t(1),f=t(95),d=t(665),h=t.n(d),b=function(e,r){var t=r.isReferenceMagicPropertyName,n=r.getReferencePartialObject,o=r.maxUnsplitDepth;return function e(r,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==r&&"object"===typeof r){var i=Object.keys(r);if(i)return Promise.all(i.map((function(o){var i=function(e){return!0===e[t]?e:null}(r[o]);return i?n(i.referenceTo).then((function(t){return r[o]=t,e(r[o],a+1)})):e(r[o],a+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},v=function(e){var r={};return function(t,n){var o=t[e];if("string"!==typeof o)throw new Error("Property ".concat(e," is not a string"));r[n]=r[n]||{};var a=Object(f.a)(h()(o),(function(e){return!!r[n][e]}));return r[n][a]=!0,a}},m=l()("fs"),j=l()("path"),g=l()("@electron/remote"),x=g?g.dialog:null,w=function(e){return m?new Promise((function(r,t){m.readFile(e,{encoding:"utf8"},(function(n,o){if(n)return t(n);try{var a=JSON.parse(o);return r(a)}catch(i){return t(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},O=function(){if(!x)return Promise.reject("Not supported");var e=g.getCurrentWindow();return x.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var r=e.filePaths;return r&&r.length?{fileIdentifier:r[0]}:null}))},y=function(e){var r=e.fileIdentifier,t=j.dirname(r);return w(r).then((function(e){return b(e,{getReferencePartialObject:function(e){return w(j.join(t,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},P=function(){var e=Object(i.a)(u.a.mark((function e(r,t){var n,o,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.fileIdentifier,o=n+".autosave",!m.existsSync(o)){e.next=17;break}if(t){e.next=5;break}return e.abrupt("return",!0);case 5:if(e.prev=5,a=m.statSync(o).mtime.getTime(),i=m.statSync(n).mtime.getTime(),!(a>i+5e3)){e.next=10;break}return e.abrupt("return",!0);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),console.error("Unable to compare *.autosave to project",e.t0),e.abrupt("return",!1);case 16:case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(r,t){return e.apply(this,arguments)}}(),k=function(e){return Promise.resolve(Object(a.a)(Object(a.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},S=t(338),F=t(550),E=t(8),D=l()("fs-extra"),C=l()("path"),N=l()("@electron/remote"),R=N?N.dialog:null,A=function(e,r){var t=performance.now();return new Promise((function(n,o){D.readFile(e,{encoding:"utf8"},(function(a,i){if(a)return o(a);""===i&&o(new Error("Written file is empty, did the write fail?")),i!==r&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-t;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),n()}))}))},L=function(){var e=Object(i.a)(u.a.mark((function e(r,t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==r){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,D.ensureDir(C.dirname(t));case 6:return e.next=8,D.writeFile(t,r);case 8:return e.next=10,A(t,r);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(r,t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(r,null,2),e.next=3,L(n,t);case 3:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),I=function(e,r,t){var n,o=Object(S.b)(e);if(e.isFolderProject()){var a=function(e,r){var t=r.pathSeparator,n=r.getArrayItemReferenceName,o=r.shouldSplit,a=r.isReferenceMagicPropertyName,i=[],c=function(e,r){var t;return i.push({reference:e,object:r}),t={},Object(p.a)(t,a,!0),Object(p.a)(t,"referenceTo",e),t};return function e(r,a,i){if(null!==r&&"object"===typeof r)if(Array.isArray(r))for(var u in r){var s=a+t+"*";if(o(s)){var l=r[u],p=n(l,i),f=i+t+p;r[u]=c(f,l),e(l,s,f)}else{var d=i+t+u;e(r[u],s,d)}}else for(var h in r){var b=a+t+h,v=i+t+h;if(o(b)){var m=r[h];r[h]=c(v,m),e(m,b,v)}else e(r[h],b,v)}}(e,"",""),i}(o,{pathSeparator:"/",getArrayItemReferenceName:v("name"),shouldSplit:(n=new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"]),function(e){return n.has(e)}),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(a.map((function(e){return T(e.object,C.join(t,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return T(o,r).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return T(o,r).catch((function(e){throw console.error("Unable to write the project:",e),e}))},M=function(e,r){var t=r.fileIdentifier,n=Date.now();if(!t)return Promise.reject('Project file is empty, "Save as" should have been called?');var o=Object(a.a)(Object(a.a)({},r),{},{name:e.getName(),gameId:e.getProjectUuid(),lastModifiedDate:n}),i=C.dirname(t);return I(e,t,i).then((function(){return{wasSaved:!0,fileMetadata:o}}))},U=function(){var e=Object(i.a)(u.a.mark((function e(r){var t,n,o,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.project,t=r.fileMetadata,n=t?t.fileIdentifier:"",o=N.getCurrentWindow(),a={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]},R){e.next=6;break}throw new Error("Unsupported");case 6:if(i=R.showSaveDialogSync(o,a)){e.next=9;break}return e.abrupt("return",{saveAsLocation:null});case 9:return e.abrupt("return",{saveAsLocation:{fileIdentifier:i}});case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(u.a.mark((function e(r,t,n){var o,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("A location was not chosen before saving as.");case 2:if(o=t.fileIdentifier){e.next=5;break}throw new Error("A file path was not chosen before saving as.");case 5:return n.onStartSaving(),a={fileIdentifier:o,name:r.getName(),gameId:r.getProjectUuid(),lastModifiedDate:Date.now()},e.next=9,n.onMoveResources({newFileMetadata:a});case 9:return i=C.dirname(o),r.setProjectFile(o),e.next=13,I(r,o,i);case 13:return e.abrupt("return",{wasSaved:!0,fileMetadata:a});case 14:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}(),B=function(e,r){var t=r.fileIdentifier+".autosave";return L(Object(S.a)(e),t).catch((function(e){throw console.error("Unable to write ".concat(t,":"),e),e}))},W=function(e){return{id:"An error occurred when saving the project. Please try again by choosing another location."}},G=t(26),_=t(905),H=o.a.memo((function(e){return Object(E.jsx)(_.a,Object(a.a)(Object(a.a)({},e),{},{viewBox:"0 0 16 16",style:{fill:"none"},children:Object(E.jsx)("path",{d:"M5.75 11.25C5.75 11.25 6 14.25 4 15.25H12C10 14.25 10.25 11.25 10.25 11.25M5.75 11.25H13.25C14.3546 11.25 15.25 10.3546 15.25 9.25V2.75C15.25 1.64543 14.3546 0.75 13.25 0.75H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V9.25C0.75 10.3546 1.64543 11.25 2.75 11.25H5.75Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}));r.a={internalName:"LocalFile",name:{id:"Your computer"},renderIcon:function(e){return Object(E.jsx)(H,{fontSize:e.size})},getFileMetadataFromAppArguments:function(e){return e[G.a]&&e[G.a].length?{fileIdentifier:e[G.a][0]}:null},onRenderNewProjectSaveAsLocationChooser:function(e){var r=e.saveAsLocation,t=e.setSaveAsLocation,n=e.newProjectsDefaultFolder,o=r?C.dirname(r.fileIdentifier):n||"";return r||t({fileIdentifier:C.join(o,"game.json")}),Object(E.jsx)(F.a,{fullWidth:!0,value:o,onChange:function(e){return t({fileIdentifier:C.join(e,"game.json")})},type:"create-game"})},createOperations:function(){return{onOpenWithPicker:O,onOpen:y,hasAutoSave:P,onSaveProject:M,onChooseSaveProjectAsLocation:U,onSaveProjectAs:J,onAutoSaveProject:B,onGetAutoSave:k,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorization to open it."}},getWriteErrorMessage:W}}}}}]);
//# sourceMappingURL=local-app.dcbea784.chunk.js.map